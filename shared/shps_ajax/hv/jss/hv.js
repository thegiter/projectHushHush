"use strict";!function(){var s="historyView",t="/shared/modules/tooltips/follow_mouse/",e="shps-ajax-hv-cnr",a="psd-ctt-scrl-cnr",n="shps-ajax-hv-pp",o="Enter",r=shpsCmm.animFramePromise,d=new shpsCmm.elmOnldr.ttlElmOnldr;d.addElm(e),d.lded().then(function(){var s=document.getElementById(e),d=document.getElementById(a),i=shpsAjax.pgMgr.operator.cttCnr,l=!1;shpsCmm.moduleMgr.get(t).then(function(t){t.obj.tooltipFm.addTo(s,"Toggle History View.")});var c=s.getElementsByClassName("icon")[0],p=shpsAjax.pgMgr.operator;p.initHvElm3d=function(s){if(mdf_cls(s,"add","shps-ajax-hv-pg"),s.ttl){var t=document.createElement("strong");t.textContent=s.ttl,mdf_cls(t,"add","shps-ajax-hv-ttl"),s.insertBefore(t,s.children[0])}var e=document.createElement("div");e.classList.add(n),s.pp=e,s.appendChild(e)},forEachNodeItem(i.children,function(s){p.initHvElm3d(s)}),p.hv3d_bfr=function(s){s.pp.classList.add("shps-ajax-hv-sdw"),s.pp.classList.remove("shps-ajax-hv-lgt")},p.hv3d_afr=function(s){s.pp.classList.add("shps-ajax-hv-lgt"),s.pp.classList.remove("shps-ajax-hv-sdw")},p.hv3d_rmv=function(s){s.pp.classList.remove("shps-ajax-hv-sdw"),s.pp.classList.remove("shps-ajax-hv-lgt")};var m=document.createElement("button");m.classList.add("shps-ajax-hv-btn","shps-ajax-hv-btn-init");var h=document.createElement("span");h.classList.add("vsb-hid"),h.textContent=o,m.appendChild(h);var v=document.createElement("span");v.classList.add("pos-abs","top","trans"),v.textContent=o,m.appendChild(v);var f=document.createElement("span");f.classList.add("pos-abs","trans"),f.textContent=o,m.appendChild(f),m.addEventListener("click",function(){var s="!"+d.lastElm.url;d.lastElm.hash&&(s+=d.lastElm.hash);var t=window.location.hash;t=="#"+s||""==t?p.closeHv():window.location.hash=s},!1),shpsAjax.pgMgr.operator.hvScrl=function(s){s>0?new r(function(){v.classList.remove("trans"),v.classList.add("btm"),v.classList.remove("top")}).then(function(){v.classList.add("trans"),f.classList.add("top"),v.classList.remove("btm")}):new r(function(){v.classList.remove("trans"),v.classList.add("top"),v.classList.remove("btm")}).then(function(){v.classList.add("trans"),f.classList.add("btm"),v.classList.remove("top")});var t=v;v=f,f=t},document.getElementById("psd-vp-cnr").insertBefore(m,i),p.openHv=function(){l||(l=!0,mdf_cls(c,"add","open"),i.addEventListener("transitionend",function s(t){return t.target!=this?!1:(t.target.removeEventListener(t.type,s),l&&(i.classList.add("disabled-force-children"),mdf_cls(d,"add","psd-vp-cnr-scrl")),void 0)},!1),mdf_cls(i,"add","shps-ajax-history-show"),m.classList.remove("shps-ajax-hv-btn-init"))},p.closeHv=function(){mdf_cls(d,"remove","psd-vp-cnr-scrl"),l&&(l=!1,mdf_cls(c,"remove","open"),mdf_cls(i,"remove","shps-ajax-history-show"),m.classList.add("shps-ajax-hv-btn-init"),i.classList.remove("disabled-force-children"))},s.addEventListener("click",function(){if(l){var s=p,t=s.scrlCnr,e=shpsCmm.scrlSnap;t.scrollTop<t.scrollHeight-t.clientHeight?(e.add(t,function(){return{v:1}},function a(){e.rmv(t,a),s.closeHv()}),t.scrollTop=t.scrollHeight-t.clientHeight):s.closeHv()}else p.openHv()},!1);var u=s.cloneNode(!0);u.classList.add("vsb-hid","pos-abs"),u.classList.remove("dsp-non");var L=s.parentNode;L.appendChild(u);var g=getStyle(u,"margin-left"),x=getStyle(u,"margin-right");s.style.marginLeft="-"+(u.offsetWidth+parseFloat(g)+parseFloat(x))+"px",new r(function(){s.classList.remove("dsp-non"),s.addEventListener("transitionend",function t(s){"margin-left"==s.propertyName&&(s.target.removeEventListener(s.type,t),s.target.style.removeProperty("margin-left"))})}).then(function(){s.style.marginLeft=g}),L.removeChild(u)}),shpsAjax.hooks[s]=function(s){shpsAjax.cpnList[s].lded=!0;var t=shpsAjax.cpnList[s].obj={};t.onload=function(s){s()}}}();