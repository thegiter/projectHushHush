!function(){var t="shps-ajax-hv-cnr",s="psd-ctt-cnr",e="psd-ctt-scrl-cnr",a="shps-ajax-hv-pp",n=shpsCmm.iCMgr,o=n.getBlobUrl("/shared/tooltip_f/jss/tooltip_f.js","script").then(function(t){return shpsCmm.lnkExtFile.lnked("script",t)});n.getObjUrl("/shared/shps_ajax/hv/csss/hv.css","link").then(function(s){var n=new ttlElmOnload(t);n.addCss(s.objUrl),n.useDefault=!1,n.callback=function(){var s=document.getElementById(e),n=shpsAjax.pgMgr.operator.cttCnr,r=!1,d=document.getElementById(t);o.then(function(){tooltipFModule.addTo(d,"Toggle History View.")});var i=d.getElementsByTagName("span")[0],l=shpsAjax.pgMgr.operator;l.initHvElm3d=function(t){if(mdf_cls(t,"add","shps-ajax-hv-pg"),t.ttl){var s=document.createElement("strong");s.textContent=t.ttl,mdf_cls(s,"add","shps-ajax-hv-ttl"),t.insertBefore(s,t.children[0])}var e=document.createElement("div");e.classList.add(a),t.pp=e,t.appendChild(e)},forEachNodeItem(n.children,function(t){l.initHvElm3d(t)}),l.hv3d_bfr=function(t){t.pp.classList.add("shps-ajax-hv-sdw"),t.pp.classList.remove("shps-ajax-hv-lgt")},l.hv3d_afr=function(t){t.pp.classList.add("shps-ajax-hv-lgt"),t.pp.classList.remove("shps-ajax-hv-sdw")},l.hv3d_rmv=function(t){t.pp.classList.remove("shps-ajax-hv-sdw"),t.pp.classList.remove("shps-ajax-hv-lgt")};var c="Enter",p=document.createElement("button");p.classList.add("shps-ajax-hv-btn","shps-ajax-hv-btn-init"),btnPh=document.createElement("span"),btnPh.classList.add("vsb-hid"),btnPh.textContent=c,p.appendChild(btnPh);var h=document.createElement("span");h.classList.add("pos-abs","top","trans"),h.textContent=c,p.appendChild(h);var v=document.createElement("span");v.classList.add("pos-abs","trans"),v.textContent=c,p.appendChild(v);var m=document.createElement("div");m.classList.add("inner-sdw"),p.addEventListener("click",function(){var t="!"+s.lastElm.url;s.lastElm.hash&&(t+=s.lastElm.hash);var e=window.location.hash;e=="#"+t||""==e?l.closeHv():window.location.hash=t},!1),p.appendChild(m),shpsAjax.pgMgr.operator.hvScrl=function(t){t>0?(h.classList.remove("trans"),h.offsetWidth,h.classList.add("btm"),h.classList.remove("top"),h.offsetWidth,h.classList.add("trans"),h.offsetWidth,v.classList.add("top"),h.classList.remove("btm")):(h.classList.remove("trans"),h.offsetWidth,h.classList.add("top"),h.classList.remove("btm"),h.offsetWidth,h.classList.add("trans"),h.offsetWidth,v.classList.add("btm"),h.classList.remove("top"));var s=h;h=v,v=s},document.getElementById("psd-vp-cnr").insertBefore(p,n),l.openHv=function(){r||(r=!0,mdf_cls(i,"add","open"),n.addEventListener("transitionend",function t(e){return e.target!=this?!1:(e.target.removeEventListener(e.type,t),r&&mdf_cls(s,"add","psd-vp-cnr-scrl"),void 0)},!1),mdf_cls(n,"add","shps-ajax-history-show"),p.classList.remove("shps-ajax-hv-btn-init"))},l.closeHv=function(){mdf_cls(s,"remove","psd-vp-cnr-scrl"),r&&(r=!1,mdf_cls(i,"remove","open"),mdf_cls(n,"remove","shps-ajax-history-show"),p.classList.add("shps-ajax-hv-btn-init"))},d.addEventListener("click",function(){if(r){var t=shpsAjax.pgMgr.operator,s=t.scrlCnr;s.scrollTop<s.scrollHeight-s.clientHeight?(optScrlLsnr.add(s,function e(){optScrlLsnr.rmv(s,e),t.closeHv()}),s.scrollTop=s.scrollHeight-s.clientHeight):t.closeHv()}else l.openHv()},!1);var f=d.cloneNode(!0);f.classList.add("vsb-hid","pos-abs"),f.classList.remove("dsp-non");var g=d.parentNode;g.appendChild(f);var L=getStyle(f,"margin-left"),u=getStyle(f,"margin-right");d.style.marginLeft="-"+(f.offsetWidth+parseFloat(L)+parseFloat(u))+"px",d.classList.remove("dsp-non"),d.offsetWidth,d.addEventListener("transitionend",function x(t){"margin-left"==t.propertyName&&(t.target.removeEventListener(t.type,x),t.target.style.removeProperty("margin-left"))}),d.style.marginLeft=L,g.removeChild(f)},n.start()},function(){console.log("get history view css obj url rejected, history view css does not exist in indexed db.")}),shpsAjax.hooks.historyView=function(t){shpsAjax.cpnList[t].lded=!0;var s=shpsAjax.cpnList[t].obj={};s.onload=function(t){t()}}}();