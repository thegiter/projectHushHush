!function(){var s="shps-ajax-hv-cnr",t="psd-ctt-cnr",e="psd-ctt-scrl-cnr",a="shps-ajax-hv-pp",n=shpsCmm.iCMgr,o=n.getBlobUrl("/shared/tooltip_f/jss/tooltip_f.js","script").then(function(s){return shpsCmm.lnkExtFile.lnked("script",s)});n.getObjUrl("/shared/shps_ajax/hv/csss/hv.css","link").then(function(t){var n=new ttlElmOnload(s);n.addCss(t.objUrl),n.useDefault=!1,n.callback=function(){var t=document.getElementById(e),n=shpsAjax.pgMgr.operator.cttCnr,d=!1,i=document.getElementById(s);o.then(function(){tooltipFModule.addTo(i,"Toggle History View.")});var r=i.getElementsByTagName("span")[0],l=shpsAjax.pgMgr.operator;l.initHvElm3d=function(s){if(mdf_cls(s,"add","shps-ajax-hv-pg"),s.ttl){var t=document.createElement("strong");t.textContent=s.ttl,mdf_cls(t,"add","shps-ajax-hv-ttl"),s.insertBefore(t,s.children[0])}var e=document.createElement("div");e.classList.add(a),s.pp=e,s.appendChild(e)},forEachNodeItem(n.children,function(s){l.initHvElm3d(s)}),l.hv3d_bfr=function(s){s.pp.classList.add("shps-ajax-hv-sdw"),s.pp.classList.remove("shps-ajax-hv-lgt")},l.hv3d_afr=function(s){s.pp.classList.add("shps-ajax-hv-lgt"),s.pp.classList.remove("shps-ajax-hv-sdw")},l.hv3d_rmv=function(s){s.pp.classList.remove("shps-ajax-hv-sdw"),s.pp.classList.remove("shps-ajax-hv-lgt")};var c="Enter",p=document.createElement("button");p.classList.add("shps-ajax-hv-btn","shps-ajax-hv-btn-init"),btnPh=document.createElement("span"),btnPh.classList.add("vsb-hid"),btnPh.textContent=c,p.appendChild(btnPh);var h=document.createElement("span");h.classList.add("pos-abs","top","trans"),h.textContent=c,p.appendChild(h);var v=document.createElement("span");v.classList.add("pos-abs","trans"),v.textContent=c,p.appendChild(v);var m=document.createElement("div");m.classList.add("inner-sdw"),p.addEventListener("click",function(){var s="!"+t.lastElm.url;t.lastElm.hash&&(s+=t.lastElm.hash);var e=window.location.hash;e=="#"+s||""==e?l.closeHv():window.location.hash=s},!1),p.appendChild(m),shpsAjax.pgMgr.operator.hvScrl=function(s){s>0?(h.classList.remove("trans"),h.offsetWidth,h.classList.add("btm"),h.classList.remove("top"),h.offsetWidth,h.classList.add("trans"),h.offsetWidth,v.classList.add("top"),h.classList.remove("btm")):(h.classList.remove("trans"),h.offsetWidth,h.classList.add("top"),h.classList.remove("btm"),h.offsetWidth,h.classList.add("trans"),h.offsetWidth,v.classList.add("btm"),h.classList.remove("top"));var t=h;h=v,v=t},document.getElementById("psd-vp-cnr").insertBefore(p,n),l.openHv=function(){d||(d=!0,mdf_cls(r,"add","open"),n.addEventListener("transitionend",function s(e){return e.target!=this?!1:(e.target.removeEventListener(e.type,s),d&&(n.classList.add("disabled"),mdf_cls(t,"add","psd-vp-cnr-scrl")),void 0)},!1),mdf_cls(n,"add","shps-ajax-history-show"),p.classList.remove("shps-ajax-hv-btn-init"))},l.closeHv=function(){mdf_cls(t,"remove","psd-vp-cnr-scrl"),d&&(d=!1,mdf_cls(r,"remove","open"),mdf_cls(n,"remove","shps-ajax-history-show"),p.classList.add("shps-ajax-hv-btn-init"),n.classList.remove("disabled"))},i.addEventListener("click",function(){if(d){var s=l,t=s.scrlCnr,e=shpsCmm.scrlSnap;t.scrollTop<t.scrollHeight-t.clientHeight?(e.add(t,function(){return{v:1}},function a(){e.rmv(t,a),s.closeHv()}),t.scrollTop=t.scrollHeight-t.clientHeight):s.closeHv()}else l.openHv()},!1);var f=i.cloneNode(!0);f.classList.add("vsb-hid","pos-abs"),f.classList.remove("dsp-non");var u=i.parentNode;u.appendChild(f);var L=getStyle(f,"margin-left"),g=getStyle(f,"margin-right");i.style.marginLeft="-"+(f.offsetWidth+parseFloat(L)+parseFloat(g))+"px",i.classList.remove("dsp-non"),i.offsetWidth,i.addEventListener("transitionend",function x(s){"margin-left"==s.propertyName&&(s.target.removeEventListener(s.type,x),s.target.style.removeProperty("margin-left"))}),i.style.marginLeft=L,u.removeChild(f)},n.start()},function(){console.log("get history view css obj url rejected, history view css does not exist in indexed db.")}),shpsAjax.hooks.historyView=function(s){shpsAjax.cpnList[s].lded=!0;var t=shpsAjax.cpnList[s].obj={};t.onload=function(s){s()}}}();