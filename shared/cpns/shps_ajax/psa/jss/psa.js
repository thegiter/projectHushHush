"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}();!function(){function e(e){var t=document.getElementById(_);b.elm=e.getElm(),t.insertBefore(b.elm,t.children[0]),b.scrlCnr=e.getScrlCnr(),b.cttCnr=e.getCttCnr()}function t(){N&&N.enable()}function n(){N&&N.disable()}function s(){b.elm.classList.remove("psd-menu-scrl-hide")}function r(){j.scrollTop>0?B&&(B=!1,s(),t()):B||(B=!0,b.elm.classList.add("psd-menu-scrl-hide"),n())}function i(){j&&y.rmvEvtLsnr(j,"optScrl",r)}function o(){return O.matches?(n(),s(),i()):R.matches?(j&&(r(),y.addEvtLsnr(j,"optScrl",r)),!0):(i(),s(),t(),void 0)}function a(){return null===j?!0:(n(),R.removeListener(o),O.removeListener(o),i(),j=null,s(),new k.AnimFramePromise(function(){b.elm.style.maxWidth=b.elm.offsetWidth+"px"}).then(function(){b.elm.classList.add("psd-menu-no-expand")}),void 0)}function l(){return b.crtPg===j?!0:null!==j?(j&&i(),j=b.crtPg,o(),!0):(b.elm.style.removeProperty("max-width"),b.elm.classList.remove("psd-menu-no-expand"),j=b.crtPg,o(),R.addListener(o),O.addListener(o),void 0)}function c(){return P?(P=null,y.triggerOn(P,"click",!1),void 0):!0}var d="psdSidebarActivator",m="/shared/modules/menu/btn/",u="/shared/modules/hex_grid/",p="/shared/modules/hex_frame/",h="/shared/modules/tooltips/follow_mouse/",f="/shared/cpns/shps_ajax/psa/csss/hf.css",v="/shared/cpns/shps_ajax/psa/csss/hg.css",g="/shared/cpns/shps_ajax/psa/csss/mb.css",_="psd-bd-cnr",b=shpsAjax.psdSidebar,E=shpsCmm.moduleMgr,C=shpsCmm.extFileMgr,y=shpsCmm.evtMgr,k=shpsCmm.util,x=shpsCmm.domMgr,L=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._setElm=n._setElm.bind(n),n}return _inherits(t,e),_createClass(t,[{key:"_setElm",value:function n(e){this._elm=e,this._scrlCnr=e.children[0].children[0],this._cttCnr=e.getElementsByClassName("ctt-cnr")[0].children[0]}}]),_createClass(t,[{key:"getElm",value:function s(){return this._elm}},{key:"getScrlCnr",value:function r(){return this._scrlCnr}},{key:"getCttCnr",value:function i(){return this._cttCnr}},{key:"render",value:function o(){return React.createElement("aside",{id:"psd-menu-cnr",className:"pos-rel dsp-flx",ref:this._setElm},React.createElement("div",{className:"scrl-cnr-wpr dsp-flx flx-dir-col h-100 disabled"},React.createElement("ul",{id:"psd-menu-scrl-cnr",className:"pos-rel dsp-ib no-style no-indent mrg-0"})),React.createElement("div",{className:"ctt-cnr pos-rel dsp-flx flx-dir-col"},React.createElement("div",{className:"dsp-flx"})),React.createElement("div",{className:"sdw disabled pos-abs-ful of-hid"}))}}]),t}(React.Component);ReactDOM.render(React.createElement(L,{ref:e}),document.createDocumentFragment());var w=0;y.addEvtLsnr(b.elm,"optElmRsz",function(){var e=b.elm.offsetWidth;e!=w&&(w=e,b.rszHdlrs.forEach(function(t){t(e)}))});var N=void 0,j=void 0,R=window.matchMedia("(max-aspect-ratio: 16/9)"),O=window.matchMedia("(max-aspect-ratio: 4/3)"),B=!0;b.isExpand()?l():a(),b.addEvtLsnr("noExpand",a),b.addEvtLsnr("doExpand",l);var P=void 0;b.addCtt=function(e,t){return e.classList.add("max-w-0"),this.cttCnr.appendChild(e),t?(t.addEventListener("click",function(t){return this==P?(e.classList.add("max-w-0"),P=void 0):(P&&y.triggerOn(P,"click",!1),e.classList.remove("max-w-0"),P=this,void 0)}),void 0):!0},b.newCttPs.forEach(function(e){e()});var M=[],F=[],T=void 0,A=void 0,S=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._setElm=n._setElm.bind(n),n._dspNonCls="dsp-non",n.props.noDspNon&&(n._dspNonCls=""),n}return _inherits(t,e),_createClass(t,[{key:"_setElm",value:function n(e){this._elm=e,this._btn=e.getElementsByTagName("button")[0],this._iconCnr=e.getElementsByClassName("icon-cnr")[0],this._icon=e.getElementsByClassName("icon")[0]}},{key:"_getMrg",value:function s(){var e=this._elm.cloneNode(!0);e.classList.add("vsb-hid","pos-abs"),e.classList.remove("dsp-non");var t=this._elm.parentNode;t.appendChild(e);var n={lft:x.getStyle(e,"margin-left"),rgt:x.getStyle(e,"margin-right")};return n.neg="-"+(e.offsetWidth+parseFloat(n.lft)+parseFloat(n.rgt))+"px",t.removeChild(e),n}}],[{key:"_insertHf",value:function r(e,t){var n=T.createObj(!1,{clss:"init init-trans"}).getElm();new k.AnimFramePromise(function(){e.insertBefore(n,t),n.getElementsByClassName("br")[0].addEventListener("transitionend",function s(e){this.removeEventListener(e.type,s),n.classList.remove("init-trans")})}).then(function(){n.classList.remove("init")})}},{key:"defaultProps",get:function i(){return{id:"",clss:"",btnClss:"",lblTxt:"",tag:"li"}}}]),_createClass(t,[{key:"componentDidMount",value:function o(){T?t._insertHf(this._iconCnr,this._icon):M.push({cnr:this._iconCnr,refElm:this._icon}),this.props.iconHtml&&(this._icon.innerHTML=this.props.iconHtml),this.props.toggle&&(this._btn.setAttribute("aria-pressed",!1),this._btn.addEventListener("click",function(e){this.setAttribute("aria-pressed",!("true"===this.getAttribute("aria-pressed")))})),this.props.tooltip&&(A?A.addTo(this._btn,this.props.tooltip):F.push({elm:this._btn,tt:this.props.tooltip}))}},{key:"getElm",value:function a(){return this._elm}},{key:"getBtn",value:function l(){return this._btn}},{key:"getIcon",value:function c(){return this._icon}},{key:"intro",value:function d(){var e=this;this._elm.style.marginLeft=this._getMrg().neg,new k.AnimFramePromise(function(){e._elm.classList.remove("dsp-non")}).then(function(){e._elm.style.removeProperty("margin-left")})}},{key:"outro",value:function m(){this._elm.addEventListener("transitionend",function e(t){return"margin-left"!=t.propertyName||t.target!=this?!1:(this.removeEventListener(t.type,e),this.classList.add("dsp-non"),void 0)}),this._elm.style.marginLeft=this._getMrg().neg}},{key:"render",value:function u(){return React.createElement(this.props.tag,{id:this.props.id,className:"icon-wpr-cnr "+this._dspNonCls+" "+this.props.clss,ref:this._setElm},React.createElement("button",{className:"icon-wpr no-style "+this.props.btnClss,type:"button",onClick:this.props.btnOnClk},React.createElement("span",{className:"icon-cnr pos-rel dsp-ib va-mid"},React.createElement("div",{className:"icon pos-abs"})),React.createElement("span",{className:"lbl dsp-ib of-hid va-mid"},this.props.lblTxt)))}}]),t}(React.Component);b.addBtn=function(e){function t(e){n=e}var n=void 0;return ReactDOM.render(React.createElement(S,_extends({},e,{ref:t})),document.createDocumentFragment()),b.scrlCnr.appendChild(n.getElm()),n},E.get(m,!0).then(function(e){C.lnked_bu("link",g).then(function(){var t=e.obj.menuBtnFactory.createObj({clss:"clickable",animBack:!0}),n=t.getElm(),s=b.addBtn({id:"psd-sidebar-menu-btn",noDspNon:!0,btnClss:n.className,iconHtml:n.innerHTML,tooltip:"Toggle Sidebar Tools",tag:"div"}),r=s.getElm(),i=s.getBtn();e.obj.MenuBtn.enableClkEvt(i,function(){r.classList.toggle("open")}),i.addEventListener("click",function(e){r.classList.contains("open")||c()});var o=b.scrlCnr;o.parentNode.insertBefore(r,o)})}),b.newBtnPs.forEach(function(e){e()}),E.get(h).then(function(e){A=e.obj.tooltipFm,F.forEach(function(e){A.addTo(e.elm,e.tt)})}),E.get(p).then(function(e){C.lnked("link",f).then(function(){T=e.obj.hexFrameFactory,M.forEach(function(e){S._insertHf(e.cnr,e.refElm)})})}),E.get(u).then(function(e){C.lnked("link",v).then(function(){N=e.obj.hexGridFactory.createObj({numRows:25,numCols:35}),b.elm.insertBefore(N.getElm(),b.elm.children[0]),b.isExpand()&&N.enable()})}),shpsAjax.hooks[d]=function(e){var t=shpsAjax.cpnList[e];t.lded=!0;var n=t.obj={};n.onload=function(e){e()}}}();