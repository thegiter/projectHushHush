"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,s,n){return s&&t(e.prototype,s),n&&t(e,n),e}}();!function(){var t="historyView",e="/shared/modules/js_frameworks/scrl_snap/",s="shps-ajax-hv-cnr",n="psd-ctt-scrl-cnr",a="shps-ajax-hv-pp",r="Enter",i=shpsCmm.util.AnimFramePromise,o=shpsAjax.psdSidebar,l=shpsAjax.pgMgr,c=shpsCmm.domMgr,d=l.operator,p=void 0;shpsCmm.moduleMgr.get(e,!0).then(function(t){p=t.obj.scrlSnapIdx}),o.appendBtn({id:s,clss:"shps-ajax-hv-cnr dsp-non",btnClss:"no-style clickable",iconHtml:"<div>\n		</div>\n		<div>\n		</div>\n		<div>\n		</div>",lblTxt:"History View",tooltip:"Toggle History View"}).then(function(t){function e(t){if(t.classList.add("shps-ajax-hv-pg"),t.ttl){var e=document.createElement("strong");e.textContent=t.ttl,e.classList.add("shps-ajax-hv-ttl"),t.insertBefore(e,t.children[0])}var s=document.createElement("div");s.classList.add(a),t.pp=s,t.appendChild(s)}function s(){u||(u=!0,v.classList.add("open"),m.addEventListener("transitionend",function t(e){return e.target!=this?!1:(e.target.removeEventListener(e.type,t),u&&(m.classList.add("disabled-force-children"),f.classList.add("psd-vp-cnr-scrl")),void 0)},!1),m.classList.add("shps-ajax-history-show"),b.classList.remove("init"))}var o=t.getBtn(),h=t.getElm(),v=o.getElementsByClassName("icon")[0],f=document.getElementById(n),m=d.cttCnr,u=!1;Array.from(m.children).forEach(function(t){e(t)}),l.addEvtLsnr("hvElm3dInit",e),l.addEvtLsnr("hv3d_bfr",function(t){t.pp.classList.add("shps-ajax-hv-sdw"),t.pp.classList.remove("shps-ajax-hv-lgt")}),l.addEvtLsnr("hv3d_afr",function(t){t.pp.classList.add("shps-ajax-hv-lgt"),t.pp.classList.remove("shps-ajax-hv-sdw")}),l.addEvtLsnr("hv3d_rmv",function(t){t.pp.classList.remove("shps-ajax-hv-sdw"),t.pp.classList.remove("shps-ajax-hv-lgt")});var _=function(t){function e(t){_classCallCheck(this,e);var s=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return s._setElm=s._setElm.bind(s),s._setSide=s._setSide.bind(s),s._setFront=s._setFront.bind(s),s.rotate=s.rotate.bind(s),s}return _inherits(e,t),_createClass(e,[{key:"_setElm",value:function s(t){this._elm=t}},{key:"_setSide",value:function n(t){this._side=t}},{key:"_setFront",value:function a(t){this._front=t}}]),_createClass(e,[{key:"componentDidMount",value:function o(){this._elm.classList.add("trans")}},{key:"getElm",value:function l(){return this._elm}},{key:"rotate",value:function c(t){var e=this;t>0?new i(function(){e._side.classList.remove("trans"),e._side.classList.add("btm"),e._side.classList.remove("top")}).then(function(){e._side.classList.add("trans"),e._front.classList.add("top"),e._side.classList.remove("btm")}):new i(function(){e._side.classList.remove("trans"),e._side.classList.add("top"),e._side.classList.remove("btm")}).then(function(){e._side.classList.add("trans"),e._front.classList.add("btm"),e._side.classList.remove("top")});var s=this._side;this._side=this._front,this._front=s}},{key:"render",value:function d(){return React.createElement("button",{className:"shps-ajax-hv-btn init pos-abs fnt-wht ta-ctr of-hid",onClick:this.props.onClk,ref:this._setElm},React.createElement("span",{className:"vsb-hid"},r),React.createElement("span",{className:"pos-abs top trans",ref:this._setSide},r),React.createElement("span",{className:"pos-abs trans",ref:this._setFront},r))}}]),e}(React.Component),L=void 0;ReactDOM.render(React.createElement(_,{onClk:function C(){var t="!"+f.lastElm.url;f.lastElm.hash&&(t+=f.lastElm.hash);var e=window.location.hash;e=="#"+t||""==e?d.closeHv():window.location.hash=t},ref:function w(t){L=t}}),document.createElement("div")),l.addEvtLsnr("hvScrl",L.rotate);var b=L.getElm();document.getElementById("psd-vp-cnr").insertBefore(b,m),l.addEvtLsnr("hvClose",function(){u&&(u=!1,v.classList.remove("open"),m.classList.remove("shps-ajax-history-show"),b.classList.add("init"),m.classList.remove("disabled-force-children"))}),o.addEventListener("click",function(){if(u){var t=d.scrlCnr;t.scrollTop<t.scrollHeight-t.clientHeight-1?(p.add(t,function(){return{v:1}},function e(){p.rmv(t,e),d.closeHv()}),t.scrollTop=t.scrollHeight-t.clientHeight):d.closeHv()}else s()},!1);var g=h.cloneNode(!0);g.classList.add("vsb-hid","pos-abs"),g.classList.remove("dsp-non");var y=h.parentNode;y.appendChild(g);var E=c.getStyle(g,"margin-left"),j=c.getStyle(g,"margin-right");h.style.marginLeft="-"+(g.offsetWidth+parseFloat(E)+parseFloat(j))+"px",new i(function(){h.classList.remove("dsp-non"),h.addEventListener("transitionend",function t(e){"margin-left"==e.propertyName&&(e.target.removeEventListener(e.type,t),e.target.style.removeProperty("margin-left"))})}).then(function(){h.style.marginLeft=E}),y.removeChild(g)}),shpsAjax.hooks[t]=function(t){shpsAjax.cpnList[t].lded=!0;var e=shpsAjax.cpnList[t].obj={};e.onload=function(t){t()}}}();