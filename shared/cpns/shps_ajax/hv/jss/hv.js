"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,s,n){return s&&t(e.prototype,s),n&&t(e,n),e}}();!function(){function t(t){if(t.classList.add("shps-ajax-hv-pg"),t.ttl){var e=document.createElement("strong");e.textContent=t.ttl,e.classList.add("shps-ajax-hv-ttl"),t.insertBefore(e,t.children[0])}var s=document.createElement("div");s.classList.add(i),t.pp=s,t.appendChild(s)}function e(){_||(_=!0,L.classList.add("open"),u.addEventListener("transitionend",function t(e){return e.target!=this?!1:(e.target.removeEventListener(e.type,t),_&&(u.classList.add("disabled-force-children"),m.classList.add("psd-vp-cnr-scrl")),void 0)},!1),u.classList.add("shps-ajax-history-show"),g.classList.remove("init"))}var s="historyView",n="/shared/modules/js_frameworks/scrl_snap/",a="shps-ajax-hv-cnr",r="psd-ctt-scrl-cnr",i="shps-ajax-hv-pp",o="Enter",l=shpsCmm.util.AnimFramePromise,c=shpsAjax.psdSidebar,d=shpsAjax.pgMgr,p=shpsCmm.domMgr,h=d.operator,v=void 0;shpsCmm.moduleMgr.get(n,!0).then(function(t){v=t.obj.scrlSnapIdx});var f=c.appendBtn({id:a,clss:"shps-ajax-hv-cnr dsp-non",iconHtml:"<div>\n		</div>\n		<div>\n		</div>\n		<div>\n		</div>",lblTxt:"History View",tooltip:"Toggle History View."}),m=document.getElementById(r),u=d.operator.cttCnr,_=!1,L=f.getElementsByClassName("icon")[0];Array.from(u.children).forEach(function(e){t(e)}),d.addEvtLsnr("hvElm3dInit",t),d.addEvtLsnr("hv3d_bfr",function(t){t.pp.classList.add("shps-ajax-hv-sdw"),t.pp.classList.remove("shps-ajax-hv-lgt")}),d.addEvtLsnr("hv3d_afr",function(t){t.pp.classList.add("shps-ajax-hv-lgt"),t.pp.classList.remove("shps-ajax-hv-sdw")}),d.addEvtLsnr("hv3d_rmv",function(t){t.pp.classList.remove("shps-ajax-hv-sdw"),t.pp.classList.remove("shps-ajax-hv-lgt")});var b=function(t){function e(t){_classCallCheck(this,e);var s=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return s._setElm=s._setElm.bind(s),s._setSide=s._setSide.bind(s),s._setFront=s._setFront.bind(s),s.rotate=s.rotate.bind(s),s}return _inherits(e,t),_createClass(e,[{key:"_setElm",value:function s(t){this._elm=t}},{key:"_setSide",value:function n(t){this._side=t}},{key:"_setFront",value:function a(t){this._front=t}}]),_createClass(e,[{key:"componentDidMount",value:function r(){this._elm.classList.add("trans")}},{key:"getElm",value:function i(){return this._elm}},{key:"rotate",value:function c(t){var e=this;t>0?new l(function(){e._side.classList.remove("trans"),e._side.classList.add("btm"),e._side.classList.remove("top")}).then(function(){e._side.classList.add("trans"),e._front.classList.add("top"),e._side.classList.remove("btm")}):new l(function(){e._side.classList.remove("trans"),e._side.classList.add("top"),e._side.classList.remove("btm")}).then(function(){e._side.classList.add("trans"),e._front.classList.add("btm"),e._side.classList.remove("top")});var s=this._side;this._side=this._front,this._front=s}},{key:"render",value:function d(){return React.createElement("button",{className:"shps-ajax-hv-btn init pos-abs fnt-wht ta-ctr of-hid",onClick:this.props.onClk,ref:this._setElm},React.createElement("span",{className:"vsb-hid"},o),React.createElement("span",{className:"pos-abs top trans",ref:this._setSide},o),React.createElement("span",{className:"pos-abs trans",ref:this._setFront},o))}}]),e}(React.Component),y=void 0;ReactDOM.render(React.createElement(b,{onClk:function x(){var t="!"+m.lastElm.url;m.lastElm.hash&&(t+=m.lastElm.hash);var e=window.location.hash;e=="#"+t||""==e?h.closeHv():window.location.hash=t},ref:function k(t){y=t}}),document.createElement("div")),d.addEvtLsnr("hvScrl",y.rotate);var g=y.getElm();document.getElementById("psd-vp-cnr").insertBefore(g,u),d.addEvtLsnr("hvClose",function(){_&&(_=!1,L.classList.remove("open"),u.classList.remove("shps-ajax-history-show"),g.classList.add("init"),u.classList.remove("disabled-force-children"))}),f.addEventListener("click",function(){if(_){var t=h.scrlCnr;t.scrollTop<t.scrollHeight-t.clientHeight-1?(v.add(t,function(){return{v:1}},function s(){v.rmv(t,s),h.closeHv()}),t.scrollTop=t.scrollHeight-t.clientHeight):h.closeHv()}else e()},!1);var E=f.cloneNode(!0);E.classList.add("vsb-hid","pos-abs"),E.classList.remove("dsp-non");var j=f.parentNode;j.appendChild(E);var w=p.getStyle(E,"margin-left"),C=p.getStyle(E,"margin-right");f.style.marginLeft="-"+(E.offsetWidth+parseFloat(w)+parseFloat(C))+"px",new l(function(){f.classList.remove("dsp-non"),f.addEventListener("transitionend",function t(e){"margin-left"==e.propertyName&&(e.target.removeEventListener(e.type,t),e.target.style.removeProperty("margin-left"))})}).then(function(){f.style.marginLeft=w}),j.removeChild(E),shpsAjax.hooks[s]=function(t){shpsAjax.cpnList[t].lded=!0;var e=shpsAjax.cpnList[t].obj={};e.onload=function(t){t()}}}();