"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,s,n){return s&&t(e.prototype,s),n&&t(e,n),e}}();!function(){var t="historyView",e="/shared/modules/js_frameworks/scrl_snap/",s="shps-ajax-hv-cnr",n="psd-ctt-scrl-cnr",a="shps-ajax-hv-pp",r="Enter",i=shpsCmm.util.AnimFramePromise,o=shpsAjax.psdSidebar,c=shpsAjax.pgMgr,l=shpsCmm.domMgr,d=c.operator,h=void 0;shpsCmm.moduleMgr.get(e,!0).then(function(t){h=t.obj.scrlSnapIdx}),o.appendBtn({id:s,clss:"shps-ajax-hv-cnr",btnClss:"clickable",iconHtml:"<div>\n		</div>\n		<div>\n		</div>\n		<div>\n		</div>",lblTxt:"History View",tooltip:"Toggle History View"}).then(function(t){function e(t){if(t.classList.add("shps-ajax-hv-pg"),t.ttl){var e=document.createElement("strong");e.textContent=t.ttl,e.classList.add("shps-ajax-hv-ttl"),t.insertBefore(e,t.children[0])}var s=document.createElement("div");s.classList.add(a),t.pp=s,t.appendChild(s)}function s(){f||(f=!0,p.classList.add("open"),u.addEventListener("transitionend",function t(e){return e.target!=this?!1:(e.target.removeEventListener(e.type,t),f&&(u.classList.add("disabled-force-children"),v.classList.add("psd-vp-cnr-scrl")),void 0)},!1),u.classList.add("shps-ajax-history-show"),L.classList.remove("init"))}var o=t.getElm(),l=t.getBtn(),p=t.getIcon(),v=document.getElementById(n),u=d.cttCnr,f=!1;Array.from(u.children).forEach(function(t){e(t)}),c.addEvtLsnr("hvElm3dInit",e),c.addEvtLsnr("hv3d_bfr",function(t){t.pp.classList.add("shps-ajax-hv-sdw"),t.pp.classList.remove("shps-ajax-hv-lgt")}),c.addEvtLsnr("hv3d_afr",function(t){t.pp.classList.add("shps-ajax-hv-lgt"),t.pp.classList.remove("shps-ajax-hv-sdw")}),c.addEvtLsnr("hv3d_rmv",function(t){t.pp.classList.remove("shps-ajax-hv-sdw"),t.pp.classList.remove("shps-ajax-hv-lgt")});var m=function(t){function e(t){_classCallCheck(this,e);var s=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return s._setElm=s._setElm.bind(s),s._setSide=s._setSide.bind(s),s._setFront=s._setFront.bind(s),s.rotate=s.rotate.bind(s),s}return _inherits(e,t),_createClass(e,[{key:"_setElm",value:function s(t){this._elm=t}},{key:"_setSide",value:function n(t){this._side=t}},{key:"_setFront",value:function a(t){this._front=t}}]),_createClass(e,[{key:"componentDidMount",value:function o(){this._elm.classList.add("trans")}},{key:"getElm",value:function c(){return this._elm}},{key:"rotate",value:function l(t){var e=this;t>0?new i(function(){e._side.classList.remove("trans"),e._side.classList.add("btm"),e._side.classList.remove("top")}).then(function(){e._side.classList.add("trans"),e._front.classList.add("top"),e._side.classList.remove("btm")}):new i(function(){e._side.classList.remove("trans"),e._side.classList.add("top"),e._side.classList.remove("btm")}).then(function(){e._side.classList.add("trans"),e._front.classList.add("btm"),e._side.classList.remove("top")});var s=this._side;this._side=this._front,this._front=s}},{key:"render",value:function d(){return React.createElement("button",{className:"shps-ajax-hv-btn init pos-abs fnt-wht ta-ctr of-hid",onClick:this.props.onClk,ref:this._setElm},React.createElement("span",{className:"vsb-hid"},r),React.createElement("span",{className:"pos-abs top trans",ref:this._setSide},r),React.createElement("span",{className:"pos-abs trans",ref:this._setFront},r))}}]),e}(React.Component),_=void 0;ReactDOM.render(React.createElement(m,{onClk:function b(){var t="!"+v.lastElm.url;v.lastElm.hash&&(t+=v.lastElm.hash);var e=window.location.hash;e=="#"+t||""==e?d.closeHv():window.location.hash=t},ref:function E(t){_=t}}),document.createElement("div")),c.addEvtLsnr("hvScrl",_.rotate);var L=_.getElm();document.getElementById("psd-vp-cnr").insertBefore(L,u),c.addEvtLsnr("hvClose",function(){f&&(f=!1,p.classList.remove("open"),u.classList.remove("shps-ajax-history-show"),L.classList.add("init"),u.classList.remove("disabled-force-children"))}),l.addEventListener("click",function(){if(f){var t=d.scrlCnr;t.scrollTop<t.scrollHeight-t.clientHeight-1?(h.add(t,function(){return{v:1}},function e(){h.rmv(t,e),d.closeHv()}),t.scrollTop=t.scrollHeight-t.clientHeight):d.closeHv()}else s()},!1),t.intro()}),shpsAjax.hooks[t]=function(t){shpsAjax.cpnList[t].lded=!0;var e=shpsAjax.cpnList[t].obj={};e.onload=function(t){t()}}}();