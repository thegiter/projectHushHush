"use strict";function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,n){for(var s=0;s<n.length;s++){var i=n[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(n,s,i){return s&&t(n.prototype,s),i&&t(n,i),n}}();!function(){var t="data_mgr_fw",n=200,s=shpsCmm.moduleMgr,i=shpsCmm.util;s.hooks[t]=function(t){var s=t.obj={},r=function(){function t(n,s,i,r){_classCallCheck(this,t),this.rowsCnr=n,this.getDataFct=s,this.dataType=i,this.additionalRowsCnrs=[],r&&(this.additionalRowsCnrs=r),this._numDs=this._numDs.bind(this),this._numAs=this._numAs.bind(this),this._sort=this._sort.bind(this),this._applySort=this._applySort.bind(this),this.ascend=this.ascend.bind(this),this.descend=this.descend.bind(this)}return _createClass(t,[{key:"_createTmpArr",value:function s(){this._tmpArr=Array.from(this.rowsCnr.children),this._tmpArr.forEach(function(t,n){t.dMSortOldIdx=n})}},{key:"_numAs",value:function r(t,n){return this.getDataFct(t)-this.getDataFct(n)}},{key:"_numDs",value:function a(t,n){return this.getDataFct(n)-this.getDataFct(t)}},{key:"_sortTmpArr",value:function e(t){this._tmpArr.sort(t)}},{key:"_applyRows",value:function o(t,s){var i=this,r=t+n,a=this._tmpArr;r>a.length&&(r=a.length),s=s.then(function(){for(var n=function e(t){i.rowsCnr.appendChild(a[t]),i.additionalRowsCnrs.forEach(function(n,s){n.appendChild(this._additionalCnrsTmpArr[s][t])})},s=t;r>s;s++)n(s)}),a.length>r&&this._applyRows(r,s)}},{key:"_applySort",value:function c(){var n=this;this._additionalCnrsTmpArr=[],this.additionalRowsCnrs.forEach(function(){this._additionalCnrsTmpArr.push([])}),this._tmpArr.forEach(function(t,s){n.additionalRowsCnrs.forEach(function(n,s){this._additionalCnrsTmpArr[s].push(n.children[t.dMSortOldIdx])})}),t._clearCnr(this.rowsCnr),this.additionalRowsCnrs.forEach(function(n){t._clearCnr(n)});var s=new i.AnimFramePromise;this._applyRows(0,s)}},{key:"_sort",value:function h(t){this._createTmpArr(),this._sortTmpArr(this["_"+this.dataType+t]),this._applySort()}}],[{key:"_clearCnr",value:function l(t){for(;t.firstChild;)t.removeChild(t.firstChild)}}]),_createClass(t,[{key:"ascend",value:function d(){this._sort("As")}},{key:"descend",value:function u(){this._sort("Ds")}}]),t}();s.Sort=r;var a=function(){function t(n,s,i){_classCallCheck(this,t),this.rowsCnr=n,this.getDataFct=s,this.additionalRowsCnrs=[],i&&(this.additionalRowsCnrs=i),this._typeArr=[],this.apply=this.apply.bind(this)}return _createClass(t,[{key:"_chkCNotMatch",value:function s(t,n,i){var r=this.getDataFct(t,i),a=n.getCFct(n.elm);if("not set"==a)return!1;var e=void 0;switch(n.cType){case"=":e=r==a?!1:!0;break;case">":e=r>a?!1:!0;break;case"<":e=a>r?!1:!0;break;case">=":e=r>=a?!1:!0;break;case"<=":e=a>=r?!1:!0;break;default:return!0}return"include"==n.fType?e:!e}},{key:"_applyRows",value:function r(t,s){var i=this,r=t+n,a=this.rowsCnr.children;r>a.length&&(r=a.length),s=s.then(function(){for(var n=function e(t){var n=a[t];i._typeArr.some(function(t,s){return i._chkCNotMatch(n,t,s)})?n.classList.contains("dsp-non")||(n.classList.add("dsp-non"),i.additionalRowsCnrs.forEach(function(n){n.children[t].classList.add("dsp-non")})):n.classList.contains("dsp-non")&&(n.classList.remove("dsp-non"),i.additionalRowsCnrs.forEach(function(n){n.children[t].classList.remove("dsp-non")}))},s=t;r>s;s++)n(s)}),a.length>r&&this._applyRows(r,s)}}]),_createClass(t,[{key:"addEvtLsnr",value:function a(t,n,s){switch(n){case"dropdown":t.addEventListener("change",s)}}},{key:"setCriterion",value:function e(t,n,s,i,r,a){var e=this;this._typeArr[i]={elm:t,getCFct:n,fType:r,cType:a},this.addEvtLsnr(t,s,function(t){e.apply()})}},{key:"apply",value:function o(){var t=new i.AnimFramePromise;this._applyRows(0,t)}}]),t}();s.Filter=a}}();