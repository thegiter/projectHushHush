"use strict";function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(n,r,s){return r&&t(n.prototype,r),s&&t(n,s),n}}();!function(){var t="data_mgr_fw",n=shpsCmm.moduleMgr,r=shpsCmm.util;n.hooks[t]=function(t){var n=t.obj={},s=function(){function t(n,r,s,a){_classCallCheck(this,t),this.rowsCnr=n,this.getDataFct=r,this.dataType=s,this.additionalRowsCnrs=a}return _createClass(t,[{key:"_createTmpArr",value:function n(){this._tmpArr=Array.from(this.rowsCnr.children),this._tmpArr.forEach(function(t,n){t.dMSortOldIdx=n})}},{key:"_numAs",value:function s(t,n){return this.getDataFct(t)-this.getDataFct(n)}},{key:"_numDs",value:function a(t,n){return this.getDataFct(n)-this.getDataFct(t)}},{key:"_sortTmpArr",value:function e(t){this._tmpArr.sort(t)}},{key:"_applySort",value:function i(){var n=this,s=[];this.additionalRowsCnrs.forEach(function(){s.push([])}),this._tmpArr.forEach(function(t,r){n.additionalRowsCnrs.forEach(function(n,r){s[r].push(n.children[t.dMSortOldIdx])})}),t._clearCnr(this.rowsCnr),this.additionalRowsCnrs.forEach(function(n){t._clearCnr(n)});var a=new r.AnimFramePromise;this._tmpArr.forEach(function(t,r){a=a.then(function(){n.rowsCnr.appendChild(t),n.additionalRowsCnrs.forEach(function(t,n){t.appendChild(s[n][r])})})})}},{key:"_sort",value:function o(t){this._createTmpArr(),this._sortTmpArr(this["_"+this.dataType+t]),this._applySort()}}],[{key:"_clearCnr",value:function c(t){for(;t.firstChild;)t.removeChild(t.firstChild)}}]),_createClass(t,[{key:"ascend",value:function l(){this._sort("As")}},{key:"descend",value:function h(){this._sort("Ds")}}]),t}();n.Sort=s;var a=function(){function t(n,r,s){_classCallCheck(this,t),this.rowsCnr=n,this.getDataFct=r,this.additionalRowsCnrs=[],s&&(this.additionalRowsCnrs=s),this._typeArr=[]}return _createClass(t,[{key:"_chkCNotMatch",value:function n(t,r,s){var a=this.getDataFct(t,s),e=r.getCFct(r.elm);if("not set"==e)return!1;var i=void 0;switch(r.cType){case"=":i=a==e?!1:!0;break;case">":i=a>e?!1:!0;break;case"<":i=e>a?!1:!0;break;case">=":i=a>=e?!1:!0;break;case"<=":i=e>=a?!1:!0;break;default:return!0}return"include"==r.fType?i:!i}}]),_createClass(t,[{key:"addEvtLsnr",value:function s(t,n,r){switch(n){case"dropdown":t.addEventListener("change",r)}}},{key:"setCriterion",value:function a(t,n,r,s,e,i){var o=this;this._typeArr[s]={elm:t,getCFct:n,fType:e,cType:i},this.addEvtLsnr(t,r,function(t){o.apply()})}},{key:"apply",value:function e(){var t=this;new r.AnimFramePromise(function(){t.rowsCnr.classList.add("dsp-non"),t.additionalRowsCnrs.forEach(function(t){t.classList.add("dsp-non")})}).then(function(){Array.from(t.rowsCnr.children).forEach(function(n,r){t._typeArr.some(function(r,s){return t._chkCNotMatch(n,r,s)})?n.classList.contains("dsp-non")||(n.classList.add("dsp-non"),t.additionalRowsCnrs.forEach(function(t){t.children[r].classList.add("dsp-non")})):n.classList.contains("dsp-non")&&(n.classList.remove("dsp-non"),t.additionalRowsCnrs.forEach(function(t){t.children[r].classList.remove("dsp-non")}))}),t.rowsCnr.classList.remove("dsp-non"),t.additionalRowsCnrs.forEach(function(t){t.classList.remove("dsp-non")})})}}]),t}();n.Filter=a}}();