"use strict";function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(n,r,e){return r&&t(n.prototype,r),e&&t(n,e),n}}();!function(){var t="data_mgr_fw",n=shpsCmm.moduleMgr,r=shpsCmm.util;n.hooks[t]=function(t){var n=t.obj={},e=function(){function t(n,r,e,a){_classCallCheck(this,t),this.rowsCnr=n,this.getDataFct=r,this.dataType=e,this.additionalRowsCnrs=a}return _createClass(t,[{key:"_createTmpArr",value:function n(){this._tmpArr=Array.from(this.rowsCnr.children),this._tmpArr.forEach(function(t,n){t.dMSortOldIdx=n})}},{key:"_numAs",value:function e(t,n){return this.getDataFct(t)-this.getDataFct(n)}},{key:"_numDs",value:function a(t,n){return this.getDataFct(n)-this.getDataFct(t)}},{key:"_sortTmpArr",value:function s(t){this._tmpArr.sort(t)}},{key:"_applySort",value:function i(){var n=this,e=[];this.additionalRowsCnrs.forEach(function(){e.push([])}),this._tmpArr.forEach(function(t,r){n.additionalRowsCnrs.forEach(function(n,r){e[r].push(n.children[t.dMSortOldIdx])})}),t._clearCnr(this.rowsCnr),this.additionalRowsCnrs.forEach(function(n){t._clearCnr(n)});var a=new r.AnimFramePromise;this._tmpArr.forEach(function(t,r){a=a.then(function(){n.rowsCnr.appendChild(t),n.additionalRowsCnrs.forEach(function(t,n){t.appendChild(e[n][r])})})})}},{key:"_sort",value:function o(t){this._createTmpArr(),this._sortTmpArr(this["_"+this.dataType+t]),this._applySort()}}],[{key:"_clearCnr",value:function c(t){for(;t.firstChild;)t.removeChild(t.firstChild)}}]),_createClass(t,[{key:"ascend",value:function h(){this._sort("As")}},{key:"descend",value:function l(){this._sort("Ds")}}]),t}();n.Sort=e;var a=function(){function t(n,r,e){_classCallCheck(this,t),this.rowsCnr=n,this.getDataFct=r,this.additionalRowsCnrs=e,this._typeArr=[]}return _createClass(t,[{key:"_chkCNotMatch",value:function n(t,r,e){var a=this.getDataFct(t,e),s=r.getCFct(r.elm);if("not set"==s)return!1;var i=void 0;switch(r.cType){case"=":i=a==s?!1:!0;break;case">":i=a>s?!1:!0;break;case"<":i=s>a?!1:!0;break;case">=":i=a>=s?!1:!0;break;case"<=":i=s>=a?!1:!0;break;default:return!0}return"include"==r.fType?i:!i}}]),_createClass(t,[{key:"addEvtLsnr",value:function e(t,n,r){switch(n){case"dropdown":t.addEventListener("change",r)}}},{key:"setCriterion",value:function a(t,n,r,e,s,i){var o=this;this._typeArr[e]={elm:t,getCFct:n,fType:s,cType:i},this.addEvt(t,r,function(t){o.apply()})}},{key:"apply",value:function s(){var t=this,n=new r.AnimFramePromise;Array.from(this.rowsCnr.children).forEach(function(r,e){t._typeArr.some(function(n,e){return t._chkCNotMatch(r,n,e)})?r.classList.contains("dsp-non")||(n=n.then(function(){r.classList.add("dsp-non"),t.additionalRowsCnrs.forEach(function(t){t.children[e].classList.add("dsp-non")})})):r.classList.contains("dsp-non")&&(n=n.then(function(){r.classList.remove("dsp-non"),t.additionalRowsCnrs.forEach(function(t){t.children[e].classList.remove("dsp-non")})}))})}}]),t}();n.Filter=a}}();