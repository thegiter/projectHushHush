"use strict";function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(n,r,s){return r&&t(n.prototype,r),s&&t(n,s),n}}();!function(){var t="data_mgr_fw",n=300,r=shpsCmm.moduleMgr,s=shpsCmm.util;r.hooks[t]=function(t){var r=t.obj={},a=function(){function t(n,r,s,a){_classCallCheck(this,t),this.rowsCnr=n,this.getDataFct=r,this.dataType=s,this.additionalRowsCnrs=[],a&&(this.additionalRowsCnrs=a)}return _createClass(t,[{key:"_createTmpArr",value:function r(){this._tmpArr=Array.from(this.rowsCnr.children),this._tmpArr.forEach(function(t,n){t.dMSortOldIdx=n})}},{key:"_numAs",value:function a(t,n){return this.getDataFct(t)-this.getDataFct(n)}},{key:"_numDs",value:function i(t,n){return this.getDataFct(n)-this.getDataFct(t)}},{key:"_sortTmpArr",value:function e(t){this._tmpArr.sort(t)}},{key:"_applyRows",value:function o(t,r){var s=this,a=t+n,i=this._tmpArr;a>i.length&&(a=i.length),r=r.then(function(){for(var n=function e(t){s.rowsCnr.appendChild(i[t]),s.additionalRowsCnrs.forEach(function(n,r){n.appendChild(this._additionalCnrsTmpArr[r][t])})},r=t;a>r;r++)n(r)}),i.length>a&&this._applyRows(a,r)}},{key:"_applySort",value:function c(){var n=this;this._additionalCnrsTmpArr=[],this.additionalRowsCnrs.forEach(function(){this._additionalCnrsTmpArr.push([])}),this._tmpArr.forEach(function(t,r){n.additionalRowsCnrs.forEach(function(n,r){this._additionalCnrsTmpArr[r].push(n.children[t.dMSortOldIdx])})}),t._clearCnr(this.rowsCnr),this.additionalRowsCnrs.forEach(function(n){t._clearCnr(n)});var r=new s.AnimFramePromise;this._applyRows(0,r)}},{key:"_sort",value:function l(t){this._createTmpArr(),this._sortTmpArr(this["_"+this.dataType+t]),this._applySort()}}],[{key:"_clearCnr",value:function h(t){for(;t.firstChild;)t.removeChild(t.firstChild)}}]),_createClass(t,[{key:"ascend",value:function u(){this._sort("As")}},{key:"descend",value:function d(){this._sort("Ds")}}]),t}();r.Sort=a;var i=function(){function t(n,r,s){_classCallCheck(this,t),this.rowsCnr=n,this.getDataFct=r,this.additionalRowsCnrs=[],s&&(this.additionalRowsCnrs=s),this._typeArr=[]}return _createClass(t,[{key:"_chkCNotMatch",value:function r(t,n,s){var a=this.getDataFct(t,s),i=n.getCFct(n.elm);if("not set"==i)return!1;var e=void 0;switch(n.cType){case"=":e=a==i?!1:!0;break;case">":e=a>i?!1:!0;break;case"<":e=i>a?!1:!0;break;case">=":e=a>=i?!1:!0;break;case"<=":e=i>=a?!1:!0;break;default:return!0}return"include"==n.fType?e:!e}},{key:"_applyRows",value:function a(t,r){var s=this,a=t+n,i=this.rowsCnr.children;a>i.length&&(a=i.length),r=r.then(function(){for(var n=function e(t){var n=i[t];s._typeArr.some(function(t,r){return s._chkCNotMatch(n,t,r)})?n.classList.contains("dsp-non")||(n.classList.add("dsp-non"),s.additionalRowsCnrs.forEach(function(n){n.children[t].classList.add("dsp-non")})):n.classList.contains("dsp-non")&&(n.classList.remove("dsp-non"),s.additionalRowsCnrs.forEach(function(n){n.children[t].classList.remove("dsp-non")}))},r=t;a>r;r++)n(r)}),i.length>a&&this._applyRows(a,r)}}]),_createClass(t,[{key:"addEvtLsnr",value:function i(t,n,r){switch(n){case"dropdown":t.addEventListener("change",r)}}},{key:"setCriterion",value:function e(t,n,r,s,a,i){var e=this;this._typeArr[s]={elm:t,getCFct:n,fType:a,cType:i},this.addEvtLsnr(t,r,function(t){e.apply()})}},{key:"apply",value:function o(){var t=new s.AnimFramePromise;this._applyRows(0,t)}}]),t}();r.Filter=i}}();