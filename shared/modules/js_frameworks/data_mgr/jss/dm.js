"use strict";function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,n){for(var s=0;s<n.length;s++){var r=n[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,s,r){return s&&t(n.prototype,s),r&&t(n,r),n}}();!function(){var t="data_mgr_fw",n=shpsCmm.moduleMgr,s=shpsCmm.util;n.hooks[t]=function(t){var n=t.obj={},r=function(){function t(n,s,r,a){_classCallCheck(this,t),this.rowsCnr=n,this.getDataFct=s,this.dataType=r,this.additionalRowsCnrs=a}return _createClass(t,[{key:"_createTmpArr",value:function n(){this._tmpArr=Array.from(this.rowsCnr.children),this._tmpArr.forEach(function(t,n){t.dMSortOldIdx=n})}},{key:"_numAs",value:function r(t,n){return this.getDataFct(t)-this.getDataFct(n)}},{key:"_numDs",value:function a(t,n){return this.getDataFct(n)-this.getDataFct(t)}},{key:"_sortTmpArr",value:function i(t){this._tmpArr.sort(t)}},{key:"_applySort",value:function e(){var n=this,r=[];this.additionalRowsCnrs.forEach(function(){r.push([])}),this._tmpArr.forEach(function(t,s){n.additionalRowsCnrs.forEach(function(n,s){r[s].push(n.children[t.dMSortOldIdx])})}),t._clearCnr(this.rowsCnr),this.additionalRowsCnrs.forEach(function(n){t._clearCnr(n)});var a=new s.AnimFramePromise;this._tmpArr.forEach(function(t,s){a=a.then(function(){n.rowsCnr.appendChild(t),n.additionalRowsCnrs.forEach(function(t,n){t.appendChild(r[n][s])})})})}},{key:"_sort",value:function o(t){this._createTmpArr(),this._sortTmpArr(this["_"+this.dataType+t]),this._applySort()}}],[{key:"_clearCnr",value:function c(t){for(;t.firstChild;)t.removeChild(t.firstChild)}}]),_createClass(t,[{key:"ascend",value:function l(){this._sort("As")}},{key:"descend",value:function h(){this._sort("Ds")}}]),t}();n.Sort=r;var a=function(){function t(n,s,r){_classCallCheck(this,t),this.rowsCnr=n,this.getDataFct=s,this.additionalRowsCnrs=[],r&&(this.additionalRowsCnrs=r),this._typeArr=[]}return _createClass(t,[{key:"_chkCNotMatch",value:function n(t,s,r){var a=this.getDataFct(t,r),i=s.getCFct(s.elm);if("not set"==i)return!1;var e=void 0;switch(s.cType){case"=":e=a==i?!1:!0;break;case">":e=a>i?!1:!0;break;case"<":e=i>a?!1:!0;break;case">=":e=a>=i?!1:!0;break;case"<=":e=i>=a?!1:!0;break;default:return!0}return"include"==s.fType?e:!e}}]),_createClass(t,[{key:"addEvtLsnr",value:function s(t,n,r){switch(n){case"dropdown":t.addEventListener("change",r)}}},{key:"setCriterion",value:function r(t,n,s,a,i,e){var o=this;this._typeArr[a]={elm:t,getCFct:n,fType:i,cType:e},this.addEvtLsnr(t,s,function(t){o.apply()})}},{key:"apply",value:function a(){var t=this;this.rowsCnr.classList.add("dsp-non"),this.additionalRowsCnrs.forEach(function(t){t.classList.add("dsp-non")}),Array.from(this.rowsCnr.children).forEach(function(n,s){t._typeArr.some(function(s,r){return t._chkCNotMatch(n,s,r)})?n.classList.contains("dsp-non")||(n.classList.add("dsp-non"),t.additionalRowsCnrs.forEach(function(t){t.children[s].classList.add("dsp-non")})):n.classList.contains("dsp-non")&&(n.classList.remove("dsp-non"),t.additionalRowsCnrs.forEach(function(t){t.children[s].classList.remove("dsp-non")}))}),this.rowsCnr.classList.remove("dsp-non"),this.additionalRowsCnrs.forEach(function(t){t.classList.remove("dsp-non")})}}]),t}();n.Filter=a}}();