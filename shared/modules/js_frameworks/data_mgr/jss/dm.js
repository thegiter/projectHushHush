"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function t(e,r){return e.__proto__=r,e})(t,e)}function _createSuper(i){var o=_isNativeReflectConstruct();return function t(){var e=_getPrototypeOf(i),r,n,r;return _possibleConstructorReturn(this,r=o?(n=_getPrototypeOf(this).constructor,Reflect.construct(e,arguments,n)):e.apply(this,arguments))}}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}!function(){var t="data_mgr_fw",e=shpsCmm.moduleMgr,r=shpsCmm.util,a=shpsCmm.domMgr;e.hooks[t]=function(t){var e=t.obj={},r=function(){function r(t,e){_classCallCheck(this,r),this.rowsCnr=t,this.additionalRowsCnrs=[],e&&(this.additionalRowsCnrs=e),this._createDocFrags()}return _createClass(r,[{key:"_createDocFrags",value:function t(){var e=this;this._docFrag=new DocumentFragment,this._additionalDocFrags=[],this.additionalRowsCnrs.forEach(function(){e._additionalDocFrags.push(new DocumentFragment)})}},{key:"_createTmpArrs",value:function t(){var e=this;this._tmpArr=Array.from(this.rowsCnr.children),this._additionalCnrsTmpArr=[],this.additionalRowsCnrs.forEach(function(t){e._additionalCnrsTmpArr.push(Array.from(t.children))})}},{key:"_clearCnrs",value:function t(){for(var e=this.rowsCnr;e.firstChild;)e.removeChild(e.firstChild),this.additionalRowsCnrs.forEach(function(t){t.removeChild(t.firstChild)})}}]),r}(),n=function(t){_inherits(a,t);var o=_createSuper(a);function a(t,e,r,n){var i;return _classCallCheck(this,a),(i=o.call(this,t,n)).getDataFct=e,i.dataType=r,i._numDs=i._numDs.bind(_assertThisInitialized(i)),i._numAs=i._numAs.bind(_assertThisInitialized(i)),i._sort=i._sort.bind(_assertThisInitialized(i)),i._applySort=i._applySort.bind(_assertThisInitialized(i)),i.ascend=i.ascend.bind(_assertThisInitialized(i)),i.descend=i.descend.bind(_assertThisInitialized(i)),i}return _createClass(a,[{key:"_numAs",value:function t(e,r){return this.getDataFct(e)-this.getDataFct(r)}},{key:"_numDs",value:function t(e,r){return this.getDataFct(r)-this.getDataFct(e)}},{key:"_sortTmpArr",value:function t(e){this._tmpArr.sort(e)}},{key:"_applySort",value:function t(){var n=this;this._createDocFrags(),this._tmpArr.forEach(function(r,t){n._docFrag.appendChild(r),n.additionalRowsCnrs.forEach(function(t,e){n._additionalDocFrags[e].appendChild(n._additionalCnrsTmpArr[e][r.dMSortOldIdx])})}),this.rowsCnr.appendChild(this._docFrag),this.additionalRowsCnrs.forEach(function(t,e){t.appendChild(n._additionalDocFrags[e])})}},{key:"_sort",value:function t(e){this._sorting||(this._sorting=!0,this._createTmpArrs(),this._tmpArr.forEach(function(t,e){t.dMSortOldIdx=e}),s=Date.now(),this._sortTmpArr(this["_"+this.dataType+e]),console.log("sort tmp arrs time: "+(Date.now()-s)),s=Date.now(),this._applySort(),console.log("apply sort time: "+(Date.now()-s)),this._sorting=!1)}},{key:"ascend",value:function t(){this._sort("As")}},{key:"descend",value:function t(){this._sort("Ds")}}]),a}(r);e.Sort=n;var i=function(t){_inherits(o,t);var i=_createSuper(o);function o(t,e,r){var n;return _classCallCheck(this,o),(n=i.call(this,t,r)).getDataFct=e,n._typeArr=[],n.apply=n.apply.bind(_assertThisInitialized(n)),n}return _createClass(o,[{key:"_chkCNotMatch",value:function t(e,r,n){var i=this.getDataFct(e,n),o=r.getCFct(r.elm),s;if("not set"==o)return!1;switch(r.cType){case"=":s=i!=o;break;case">":s=!(o<i);break;case"<":s=!(i<o);break;case">=":s=!(o<=i);break;case"<=":s=!(i<=o);break;default:return!0}return"include"==r.fType?s:!s}},{key:"_filterTmpArrs",value:function t(){var n=this;this._tmpArr.forEach(function(r,t){n._docFrag.appendChild(r),n.additionalRowsCnrs.forEach(function(t,e){n._additionalDocFrags[e].appendChild(n._additionalCnrsTmpArr[e][r.dMSortOldIdx])})})}},{key:"_applyFilter",value:function t(){var n=this,e=this.rowsCnr,r=e.children,i=e.parentNode,o;(new DocumentFragment).appendChild(e),a.forEachNode(r,function(r,e){n._typeArr.some(function(t,e){return n._chkCNotMatch(r,t,e)})?r.classList.contains("dsp-non")||(r.classList.add("dsp-non"),n.additionalRowsCnrs.forEach(function(t){t.children[e].classList.add("dsp-non")})):r.classList.contains("dsp-non")&&(r.classList.remove("dsp-non"),n.additionalRowsCnrs.forEach(function(t){t.children[e].classList.remove("dsp-non")}))}),i.appendChild(e)}},{key:"apply",value:function t(){this._filtering||(this._filtering=!0,this._createTmpArrs(),this._clearCnrs(),this._filterTmpArrs(),this._applyFilter(),this._filtering=!1)}},{key:"addEvtLsnr",value:function t(e,r,n){switch(r){case"dropdown":e.addEventListener("change",n);break;default:}}},{key:"setCriterion",value:function t(e,r,n,i,o,s){var a=this;this._typeArr[i]={elm:e,getCFct:r,fType:o,cType:s},this.addEvtLsnr(e,n,function(t){a.apply()})}}]),o}(r);e.Filter=i}}();