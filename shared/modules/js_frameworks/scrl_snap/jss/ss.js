"use strict";!function(){var r="scrl_snap_fw",l=shpsCmm.moduleMgr,i=shpsCmm.evtMgr;l.hooks[r]=function(r){var l=r.obj={},n=l.scrlSnapIdx={};n._calcIdx=function(r,l,i,n){if(0==n)return!1;if(1==n)return 0;var t=l-i;if(0>=t)return 0;var s=t/(n-1);return Math.round(r/s)},n._scrlEndHdlr=function(r,l){var i=this,n=l,t=n.scrlSnapIdx,s=n.scrollTop,c=n.scrollHeight,a=n.clientHeight;s!=t.lastT||c!=t.lastSh||a!=t.lastCh?(t.lastT=s,t.lastSh=c,t.lastCh=a):s=!1;var d=n.scrollLeft,h=n.scrollWidth,e=n.clientWidth;d!=t.lastL||h!=t.lastSw||e!=t.lastCw?(t.lastL=d,t.lastSw=h,t.lastCw=e):d=!1,t.pairs.forEach(function(r){var l=r.gNCF(),t={};if(l.v&&s!==!1){var o=i._calcIdx(s,c,a,l.v);o!==!1&&(t.v=o)}if(l.h&&d!==!1){var v=i._calcIdx(d,h,e,l.h);v!==!1&&(t.h=v)}("v"in t||"h"in t)&&r.hdlr(t,n)})}.bind(n),n.forceFireHdlrs=function(r){var l=this,i=r.scrlSnapIdx;i.pairs.forEach(function(n){var t=n.gNCF(),s={};if(t.v){var c=i.lastT=r.scrollTop,a=i.lastSh=r.scrollHeight,d=i.lastCh=r.clientHeight,h=l._calcIdx(c,a,d,t.v);h!==!1&&(s.v=h)}if(t.h){var e=i.lastL=r.scrollLeft,o=i.lastSw=r.scrollWidth,v=i.lastCw=r.clientWidth,u=l._calcIdx(e,o,v,t.h);u!==!1&&(s.h=u)}("v"in s||"h"in s)&&n.hdlr(s,r)})}.bind(n),n.add=function(r,l,n){if(r.scrlSnapIdx){var t=r.scrlSnapIdx;t.pairs.every(function(r){return r.hdlr!=n?!0:void 0})&&t.pairs.push({gNCF:l,hdlr:n})}else{var s=r.scrlSnapIdx={};s.lastT=r.scrollTop,s.lastL=r.scrollLeft,s.pairs=[{gNCF:l,hdlr:n}],i.addEvtLsnr(r,"optScrlEnd",this._scrlEndHdlr)}},n.rmv=function(r,l){if(!r.scrlSnapIdx)return!0;var n=r.scrlSnapIdx.pairs,t=void 0;n.some(function(r,i){return r.hdlr==l?(t=i,!0):void 0})&&(n.splice(t,1),n.length<=0&&(i.rmvEvtLsnr(r,"optScrlEnd",this._scrlEndHdlr),r.scrlSnap=void 0))};var t=l.swipeClick={};t.getVNum=function(r){return{v:r.children.length}},t.getHNum=function(r){return{h:r.children.length}},t.getVElm=function(r,l){return l.children[r.v]},t.getHElm=function(r,l){return l.children[r.h]},t._scrlSnapHdlr=function(r,l){var n=l.swipeClick,t=!1;"h"in r&&n.lastHIdx!==r.h&&(n.lastHIdx=r.h,t=!0),"v"in r&&n.lastVIdx!==r.v&&(n.lastVIdx=r.v,t=!0),n.pairs.forEach(function(n){var s=n.gEBI(r,l);t?i.triggerOn(s,"click"):n.hdlr&&n.hdlr(s)})},t.chkScrl=function(r){n._scrlEndHdlr(void 0,r)},t.add=function(r,l,i,t){if(r.swipeClick){var s=r.swipeClick;s.pairs.every(function(r){return r.hdlr!=t?!0:void 0})&&s.pairs.push({gEBI:i,hdlr:t})}else{var c=r.swipeClick={};c.pairs=[{gEBI:i,hdlr:t}],n.add(r,function(){return l(r)},this._scrlSnapHdlr),this.chkScrl(r)}},t.rmv=function(r,l){if(!r.swipeClick)return!1;var i=r.swipeClick.pairs,t=void 0;i.some(function(r,i){return r.hdlr==l?(t=i,!0):void 0})&&(i.splice(t,1),i.length<=0&&(n.rmv(r,this._scrlSnapHdlr),r.swipeClick=void 0))}}}();