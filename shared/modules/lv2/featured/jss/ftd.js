!function(){const t="lv2_featured",i="/shared/modules/contour/",e="ftd-ctt-img";var n=shpsCmm.moduleMgr;n.hooks[t]=function(t){var s=t.obj={},r=s.lv2Ftd=function(t,i,e){this.cnr=t,this.cttCnr=t.getElementsByClassName("ftd-ctt-cnr")[0];var n=this;shpsCmm.createAjax("POST",i,shpsCmm.getRefererParam()+"&refpg="+window.location.hash,"json").then(function(t){var i=n.ftdCtt=t.response;"Array"==classOf(i)&&(i.forEach(function(t){imgPreload(t.img_url)}),n.createCtt(i[0],n.cttCnr),n.cnr.classList.remove("opa-0"))})};r.prototype.createCtt=function(t,i){var n=t.img_url,s=t.img_wdt,o=t.img_hgt,a=t.item_link,h=t.txt,d=t.txt_pstn,m=t.txt_wdt,c=t.txt_html,l=i.children[0];if(this.ttlWdt=i.offsetWidth,this.ttlHgt=i.offsetHeight,this.block_hgt_min=Math.round(this.ttlHgt/3),this.img_wdt_min=Math.round(this.ttlWdt/6),this.img_wdt_max=this.ttlWdt-this.img_wdt_min,this.ctr_top=this.ttlHgt/2,this.ctr_lft=this.ttlWdt/2,s<this.ttlWdt){var g=this.ttlWdt/s;s*=g,o*=g}if(o<this.ttlHgt){var g=this.ttlHgt/o;s*=g,o*=g}var f=this.ttlWdt,_=f,u;if(h){if(u="txt","undefined"==typeof d||"lft"!=d){var v=["lft","ctr","rgt"];d=v[getRandomInt(0,3)]}if("ctr"==d){var p=this.ttlWdt-2*this.img_wdt_min;("undefined"==typeof m||m>p)&&(m=getRandomInt(img_wdt_min,p+1)),this.img_wdt_max-=m}else("undefined"==typeof m||m>this.img_wdt_max)&&(m=getRandomInt(this.img_wdt_min,this.img_wdt_max+1)),this.img_wdt_max=this.ttlWdt-m;_=this.ttlWdt-m}else{var w=["even","random"];u=w[getRandomInt(0,2)]}for(var x=[],H=0,k=0,b=o/2,y=s/2,C="";f;){var W="img";switch(u){case"txt":switch(d){case"lft":0===H&&(W="txt");break;case"ctr":1==H&&(W="txt");break;case"rgt":f<m+this.img_wdt_min&&(W="txt")}break;case"even":W="img";break;case"random":W="img"}var I="";switch(W){case"img":x[H]=getRandomInt(this.img_wdt_min,this.img_wdt_max+1),_-x[H]<this.img_wdt_min&&(x[H]=_);for(var N=0,R=[],E=this.ttlHgt;E>=this.block_hgt_min;){var P;if(0===N){var L;L=x[H]>=2*this.img_wdt_min?.1*this.ttlHgt:this.ttlHgt-this.block_hgt_min,P=getRandomInt(0,L+1),E-=P}else P+=R[N-1].hgt;var M=getRandomInt(this.block_hgt_min,this.ttlHgt-P);E-=M;var T=M/this.ttlHgt*100,j=P/this.ttlHgt*100;I+='\r\n							<div class="ftd-ctt-block" style="top:'+j+"%;height:"+T+'%;">\r\n								<div class="ftd-ctt-img-cnr">\r\n									<a href="'+a+'" title="Open the featured article page." target="_blank" class="ftd-ctt-img" style="background-image:url('+n+');">\r\n									</a>\r\n								</div>\r\n							</div>',R[N]={top:P,hgt:M},N++}_-=x[H];break;case"txt":x[H]=m,I=txtHTML}C+='<div class="ftd-ctt-col" style="width:'+x[H]+'px"><!--col stands for column-->'+I+"\r\n				</div>",f-=x[H],k+=x[H],H++}l.innerHTML=C,r.getContour().then(function(t){forEachNodeItem(l.getElementsByClassName(e),function(i){i.innerHTML=t,i.children[0].classList.remove("opa-0")})});var B=this;forEachNodeItem(l.children,function(t,i){var n=B.ctr_lft-t.offsetLeft,r=n-y;forEachNodeItem(t.getElementsByClassName(e),function(t){var i=t.parentNode.parentNode,e=B.ctr_top-i.offsetTop,n=e-b,a=r/(t.offsetWidth-s)*100,h=n/(t.offsetHeight-o)*100,d=o/t.offsetHeight*100,m=s/t.offsetWidth*100;t.style.backgroundSize=m+"% "+d+"%",t.style.backgroundPosition=a+"% "+h+"%"})})},r.getContour=function(){return this.contourP?this.contourP:this.contourP=n.get(i).then(function(t){return r.contourHtml='<div class="contour-wpr opa-0 fade-in-norm">\r\n					'+t.html+"\r\n				</div>",r.contourHtml})}}}();