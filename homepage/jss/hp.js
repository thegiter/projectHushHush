"use strict";!function(){var e="hp-bd",t="hp-bigpic-base",n="hp-bar",o="hp-menu",i="hp-menu-resp",s="/shared/modules/menu/btn/",d="/shared/modules/onenote_menu/",a="/shared/modules/menu_items/",r="/shared/modules/ftr/info_lnks/",c="shared/modules/tooltips/simple/",l="ftr-info-lnks",m=shpsCmm.elmOnldr,u=shpsCmm.moduleMgr,f=new m.ttlElmOnldr;f.addElm(e),f.addBuImg("/homepage/imgs/bg_img.jpg"),f.addBuCss("/homepage/csss/hp.css");var h=new m.ttlElmOnldr;h.addElm(t),h.addBuImgs("/homepage/imgs//*replace*/",["base_ptn.jpg","main_pic.jpg","abstract.png"]);var p=Promise.all([m.elmLded(n),u.get(s,!0)]);shpsAjax.hooks.homepage=function(m){var g=shpsAjax.pgMgr.cache[m].obj={};g.lded=!1;var v,E,b,y,L,x=function I(){},_=function N(){},B=function k(){},H=function j(){p.then(function(){requestAnimationFrame(function(){b.classList.remove("dsp-non"),b.addEventListener("transitionend",function e(t){if(t.target!=this)return!1;t.target.removeEventListener(t.type,e),b.classList.remove("hp-bar-sdw-in-init");var n=(v.scrollWidth-v.clientWidth)/2,o=v.clientWidth/2;n>o&&(n=o),transScroll(v,n,!0,1.5)},!1),requestAnimationFrame(function(){b.classList.remove("hp-bar-in-init")})})})};g.intro=function(e){var t={cb:function n(){e&&e.cb&&e.cb(),new Promise(function(e){console.log("bg introed, triggering homepage intro"),v.addEventListener("transitionend",function t(n){return console.log("cnr fadeing transition end"),n.target!=this?!1:(console.log("transitionend is triggered on the container"),n.target.removeEventListener(n.type,t),e(),void 0)},!1),mdf_cls(v,"remove","dsp-non"),v.offsetHeight,y(),mdf_cls(v,"remove","opa-0")}).then(function(){return h.lded()}).then(function(){console.log("bigpic anim inited"),E.style.left="0",setTimeout(H,1e3)})},cbTiming:"end"};shpsAjax.cpnMgr.operator.open("bg_basic",t)},g.exit=function(e){var t=function n(){v.classList.add("dsp-non")};e&&e.instant?(t(),x()):(e&&e.cb&&"end"==e.cbTiming&&(t=function o(){v.classList.add("dsp-non"),e.cb()}),v.addEventListener("transitionend",function i(e){return e.target!=this?!1:(e.target.removeEventListener(e.type,i),t(),void 0)}),B()),v.classList.add("opa-0"),E.style.removeProperty("left"),_()};var C=function P(){},w=function W(){};g.swapOut=function(){w()},g.swapIn=function(){C()},g.onload=function(m){f.lded().then(function(){function n(){if(E.offsetHeight!=E.lastH){E.lastH=E.offsetHeight;var e=1.026851851851852*E.offsetHeight,t=E.offsetWidth-e;t>0?E.style.marginRight=t+"px":E.style.removeProperty("margin-right"),E.style.width=e+"px"}}function o(){v.offsetWidth!=v.lastW&&(v.lastW=v.offsetWidth,forEachNodeItem(i.children,function(e){e.children[0].style.maxWidth=v.lastW+"px"}))}console.log("hp cnr teo lded"),v=document.getElementById(e),E=document.getElementById(t),E.lastH=0,optElmRszLsnr.add(E,n),v.lastW=0;var i=document.getElementById("hp-cnr");optElmRszLsnr.add(v,o),y=function s(){y=function e(){},n(),o()},shpsAjax.psdMenu.regFixed(function(e){v.style.backgroundPosition=e+"px",E.style.backgroundPosition=e+"px, center bottom, center top"}),m()}),p.then(function(){function e(e){a[e].state="open",r&&t(r),mdf_cls(a[e].btnVer,"add","ver-to-hor");var n=a[e].cnr,o=n.cloneNode(!0);mdf_cls(o,"add","vsb-hid pos-abs"),o.style.height="auto",n.parentNode.appendChild(o),n.addEventListener("transitionend",function i(t){return t.target!=this?!1:(t.target.removeEventListener(t.type,i),"open"==a[e].state&&(n.style.height="auto"),void 0)},!1),n.style.height=o.offsetHeight+"px",n.parentNode.removeChild(o),r=e}function t(e){a[e].state="close",mdf_cls(a[e].btnVer,"remove","ver-to-hor");var t=a[e].cnr;"auto"==t.style.height&&(t.style.height=t.offsetHeight+"px",t.offsetHeight),t.style.height="0",e==r&&(r=void 0)}function o(n){var o=this.dataset.index;"close"==a[o].state?e(o):t(o)}function i(){h?h=!1:(r&&t(r),"opening"==m&&c.dispatchEvent(p))}b=document.getElementById(n),x=function g(){b.classList.add("dsp-non")},_=function v(){b.classList.add("hp-bar-sdw-in-init","hp-bar-in-init")},B=function E(){b.addEventListener("transitionend",function e(t){return t.target!=this?!1:(t.target.removeEventListener(t.type,e),x(),void 0)})};var d=document.getElementById("hp-menu").children,a=[],r;forEachNodeItem(d,function(e,t){var n=a[t]={},i=n.btn=e.getElementsByClassName("expand-btn-cnr")[0].getElementsByTagName("button")[0];i.dataset.index=t,n.btnVer=i.getElementsByClassName("ver")[0],n.cnr=e.getElementsByClassName("sub-menu-cnr")[0],n.state="close",i.addEventListener("click",o,!1)});var c=document.getElementById("hp-menu-btn");u.get(s).then(function(e){new e.obj.menuBtn(c)});var l=document.getElementById("hp-menu-resp"),m="closed",f="60vh";c.addEventListener("click",function(){"opening"==m?(m="closing",l.style.maxHeight==f&&(mdf_cls(l,"remove","hp-menu-resp-trans"),l.style.maxHeight=l.offsetHeight+"px",l.offsetHeight,mdf_cls(l,"add","hp-menu-resp-trans")),l.style.maxHeight="0"):(m="opening",l.style.maxHeight=f)},!1);var h=!1;b.addEventListener("click",function(){h=!0},!1);var p=new MouseEvent("click",{bubbles:!1,cancelable:!0});C=function y(){window.addEventListener("click",i,!1)},w=function L(){window.removeEventListener("click",i)},C()}),Promise.all([f.lded(),h.lded(),p]).then(function(){return Promise.all([u.get(d,!0),u.get(a,!0)])}).then(function(e){function t(e,n,o,i){var s=document.createElement("ul");mdf_cls(s,"add","no-style no-indent");var d=document.createElement("span");mdf_cls(d,"add","pointer"),forEachObjProp(e,function(e,n){var a=document.createElement("li"),r=document.createElement("div");mdf_cls(r,"add","con-marker"),a.appendChild(r);var c=document.createElement("a");if(c.href=e.href,c.textContent=n,mdf_cls(c,"add","va-mid"),a.appendChild(c),"ctt"==e.type)mdf_cls(c,"add","ctt");else if("cat"==e.type&&(mdf_cls(c,"add","cat"),e.smi)){var l=document.createElement("span");l.innerHTML="&#8901;",mdf_cls(l,"add","va-mid sep"),a.appendChild(l);var m=document.createElement("button");m.title="Show sub-menus.",m.type="button",m.innerHTML="&#8811;",mdf_cls(m,"add","va-mid arrow no-style clickable");var u=t(e.smi,n,o,i+1);m.addEventListener("click",function(){var e=u.parentNode;e.insertBefore(u,e.childNodes[0]),o.focus(i+1),a.insertBefore(d,a.childNodes[0])},!1),a.appendChild(m)}s.appendChild(a)});var a=document.createElement("span");return a.textContent="~~ "+n+" ~~",s.appendChild(a),o.addToPane(i,s),s}for(var n=e[0].obj,s=e[1].obj,d=s.getItems(),a=document.getElementById(o).children,r=0;r<a.length;r++){var c=a[r].children[0].textContent;if(d[c]){var l=a[r].getElementsByClassName("omc")[0],m=new n.onenoteMenu(l,"50vh");t(d[c].smi,c,m,1),m.focus(1),mdf_cls(l,"remove","loading")}}var u=document.getElementById(i).children[0],f=new n.onenoteMenu(u,"40vh");t(d,"SHPS",f,1),f.focus(1),mdf_cls(u,"remove","loading")}).then(function(){return u.get(r)}).then(function(){forEachNodeItem(b.getElementsByClassName(l),function(e){e.classList.remove("vsb-hid"),e.offsetHeight,e.classList.remove("opa-0")}),u.get(c)})}}}();