!function(){function e(t,n,i,s){var o=document.createElement("ul");mdf_cls(o,"add","no-style no-indent");var a=document.createElement("span");mdf_cls(a,"add","pointer"),forEachObjProp(t,function(t,n){var d=document.createElement("li"),c=document.createElement("div");mdf_cls(c,"add","con-marker"),d.appendChild(c);var r=document.createElement("a");if(r.href=t.href,r.textContent=n,mdf_cls(r,"add","va-mid"),d.appendChild(r),"ctt"==t.type)mdf_cls(r,"add","ctt");else if("cat"==t.type&&(mdf_cls(r,"add","cat"),t.smi)){var l=document.createElement("span");l.innerHTML="&#8901;",mdf_cls(l,"add","va-mid sep"),d.appendChild(l);var m=document.createElement("button");m.title="Show sub-menus.",m.type="button",m.innerHTML="&#8811;",mdf_cls(m,"add","va-mid arrow no-style clickable");var f=e(t.smi,n,i,s+1);m.addEventListener("click",function(){var e=f.parentNode;e.insertBefore(f,e.childNodes[0]),i.focus(s+1),d.insertBefore(a,d.childNodes[0])},!1),d.appendChild(m)}o.appendChild(d)});var d=document.createElement("span");return d.textContent="~~ "+n+" ~~",o.appendChild(d),i.addToPane(s,o),o}var t="hp-bd",n="hp-bigpic-base",s="hp-bar",o=new ttlElmOnload(t);o.addImgs("/homepage/imgs//*replace*/.jpg",["bg_img"]),o.addCss("/homepage/csss/hp.css"),o.useDefault=!1,o.start();var a=new ttlElmOnload(n);a.addImgs("/homepage/imgs//*replace*/",["base_ptn.jpg","main_pic.jpg","abstract.png"]),a.useDefault=!1,a.start();var d=new ttlElmOnload(s);d.addScript("/shared/menu/btn/jss/btn.js"),d.useDefault=!1,d.start(),shpsAjax.hooks.homepage=function(e){function c(){m.addEventListener("transitionend",function e(t){return console.log("cnr fadeing transition end"),t.target!=this?!1:(console.log("transitionend is triggered on the container"),t.target.removeEventListener(t.type,e),E(),void 0)},!1),mdf_cls(m,"remove","dsp-non"),m.offsetHeight,l(),mdf_cls(m,"remove","opa-0")}shpsAjax.pgMgr.cache[e].obj={};var r=shpsAjax.pgMgr.cache[e].obj;r.lded=!1;var l,m,f,u,p,h=function(){},g=function(){},v=function(){},b=function(){function e(){p=document.getElementById(s),b=function(){u(),mdf_cls(p,"remove","hp-bar-in-trans"),p.offsetHeight,mdf_cls(p,"add","hp-bar-sdw-in-init"),mdf_cls(p,"remove","dsp-non"),p.offsetHeight,mdf_cls(p,"add","hp-bar-in-trans"),p.addEventListener("transitionend",function e(t){if(t.target!=this)return!1;t.target.removeEventListener(t.type,e),mdf_cls(p,"remove","hp-bar-sdw-in-init");var n=(m.scrollWidth-m.clientWidth)/2,i=m.clientWidth/2;n>i&&(n=i),transScroll(m,n,!0,1.5)},!1),mdf_cls(p,"remove","hp-bar-in-init")},h=function(){p.classList.add("dsp-non")},g=function(){p.classList.add("hp-bar-sdw-in-init","hp-bar-in-init")},v=function(){p.addEventListener("transitionend",function e(t){return t.target!=this?!1:(t.target.removeEventListener(t.type,e),h(),void 0)})},b()}d.lded?e():d.callback=e},E=function(){function e(){console.log("bigpic anim inited"),E=function(){f.style.left="0",setTimeout(b,1e3)},E()}console.log("bigpic intro triggered"),a.lded?(console.log("bigpic teo loaded"),e()):(console.log("bigpic teo not loaded"),a.callback=e)};r.intro=function(e){var t={cb:function(){e&&e.cb&&e.cb(),c()},cbTiming:"end"};shpsAjax.cpnMgr.operator.open("bg_basic",t)},r.exit=function(e){var t=function(){m.classList.add("dsp-non")};e&&e.instant?(t(),h()):(e&&e.cb&&"end"==e.cbTiming&&(t=function(){m.classList.add("dsp-non"),e.cb()}),m.addEventListener("transitionend",function n(e){return e.target!=this?!1:(e.target.removeEventListener(e.type,n),t(),void 0)}),v()),m.classList.add("opa-0"),f.style.removeProperty("left"),g()},r.onload=function(e){function s(){function s(){if(f.offsetHeight!=f.lastH){f.lastH=f.offsetHeight;var e=1.026851851851852*f.offsetHeight,t=f.offsetWidth-e;t>0?f.style.marginRight=t+"px":f.style.removeProperty("margin-right"),f.style.width=e+"px"}}function o(){m.offsetWidth!=m.lastW&&(m.lastW=m.offsetWidth,forEachNodeItem(a.children,function(e){e.children[0].style.maxWidth=m.lastW+"px"}))}m=document.getElementById(t),f=document.getElementById(n),f.lastH=0,optElmRszLsnr.add(f,s),m.lastW=0;var a=document.getElementById("hp-cnr");optElmRszLsnr.add(m,o),l=function(){l=function(){},s(),o()},shpsAjax.psdMenu.regFixed(function(e){m.style.backgroundPosition=e+"px",f.style.backgroundPosition=e+"px, center bottom, center top"}),u=function(){function e(e){o[e].state="open",a&&t(a),mdf_cls(o[e].btnVer,"add","ver-to-hor");var n=o[e].cnr,i=n.cloneNode(!0);mdf_cls(i,"add","vsb-hid pos-abs"),i.style.height="auto",n.parentNode.appendChild(i),n.addEventListener("transitionend",function(t){return t.target!=this?!1:(t.target.removeEventListener(t.type,arguments.callee),"open"==o[e].state&&(n.style.height="auto"),void 0)},!1),n.style.height=i.offsetHeight+"px",n.parentNode.removeChild(i),a=e}function t(e){o[e].state="close",mdf_cls(o[e].btnVer,"remove","ver-to-hor");var t=o[e].cnr;"auto"==t.style.height&&(t.style.height=t.offsetHeight+"px",t.offsetHeight),t.style.height="0",e==a&&(a=void 0)}function n(n){var i=this.dataset.index;"close"==o[i].state?e(i):t(i)}u=function(){};var s=document.getElementById("hp-menu").children,o=[],a;for(i=0;i<s.length;i++)o[i]={},o[i].btn=s[i].getElementsByClassName("expand-btn-cnr")[0].getElementsByTagName("button")[0],o[i].btn.dataset.index=i,o[i].btnVer=o[i].btn.getElementsByClassName("ver")[0],o[i].cnr=s[i].getElementsByClassName("sub-menu-cnr")[0],o[i].state="close",o[i].btn.addEventListener("click",n,!1);var d=document.getElementById("hp-menu-btn");menuBtnModule(d);var c=document.getElementById("hp-menu-resp"),r="closed",l="60vh";d.addEventListener("click",function(){"opening"==r?(r="closing",c.style.maxHeight==l&&(mdf_cls(c,"remove","hp-menu-resp-trans"),c.style.maxHeight=c.offsetHeight+"px",c.offsetHeight,mdf_cls(c,"add","hp-menu-resp-trans")),c.style.maxHeight="0"):(r="opening",c.style.maxHeight=l)},!1);var m=!1;p.addEventListener("click",function(){m=!0},!1);var f=new MouseEvent("click",{bubbles:!1,cancelable:!0});window.addEventListener("click",function(){m?m=!1:(a&&t(a),"opening"==r&&d.dispatchEvent(f))},!1)},e()}o.lded?s():o.callback=s}};var c="hp-menu",r=new ttlElmOnload(c);r.addScript("/shared/onenote_menu_cnr/jss/omc.js"),r.addScript("/shared/mis/jss/mis.js"),r.useDefault=!1,r.callback=function(){smiModule.onloadDo(function(t){for(var n=document.getElementById(c).children,i=0;i<n.length;i++){var s=n[i].children[0].textContent;if(t[s]){var o=n[i].getElementsByClassName("omc")[0],a=new omcModule(o,"50vh");e(t[s].smi,s,a,1),a.focus(1),mdf_cls(o,"remove","loading")}}})},r.start();var l="hp-menu-resp",m=new ttlElmOnload(l);m.addScript("/shared/onenote_menu_cnr/jss/omc.js"),m.addScript("/shared/mis/jss/mis.js"),m.useDefault=!1,m.callback=function(){smiModule.onloadDo(function(t){var n=document.getElementById(l).children[0],i=new omcModule(n,"40vh");e(t,"SHPS",i,1),i.focus(1),mdf_cls(n,"remove","loading")})},m.start()}();