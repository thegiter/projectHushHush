"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),shpsAjax={};!function(){shpsAjax.siteTtl="SHPS",shpsAjax.lded=!1,shpsAjax.cpnList={psdSidebarActivator:{url:"shared/cpns/shps_ajax/psa/",cnr_id:"psd-menu-scrl-cnr",lded:!1},historyView:{url:"shared/cpns/shps_ajax/hv/",cnr_id:"psd-menu-scrl-cnr",lded:!1},menu_basic:{url:"",cnr_id:"psd-menu-scrl-cnr",lded:!1},betaSign:{url:"shared/cpns/beta_sign/",cnr_id:"the-shps-ajax-bd",lded:!1},bg_basic:{url:"shared/cpns/bgs/basic/",cnr_id:"psd-bg-cnr",lded:!1},bg_tdcubes:{url:"shared/cpns/bgs/tdcubes/",cnr_id:"psd-bg-cnr",lded:!1},bg_inttile:{url:"shared/cpns/bgs/inttile/",cnr_id:"psd-bg-cnr",lded:!1},bg_tlight:{url:"shared/cpns/bgs/tlight/",cnr_id:"psd-bg-cnr",lded:!1}},shpsAjax.hooks={},shpsAjax.inits=[]}(),function(){function e(e){return"/debug/view_test.php"==window.location.pathname?"/"+e:e}function t(){a.forEachObjProp(l,function(e){e.qable&&!c[e.url]&&(c[e.url]=e),e.p=void 0,e.ajax.abort()}),l={}}function n(){var e=!1;if(a.forEachObjProp(l,function(t){t&&t.url&&(e=!0)}),!e){var t=!1;a.forEachObjProp(c,function(e){e&&e.url&&(t=e)}),t&&(l[t.url]=t,c[t.url]=void 0,t.ajax.send())}}function s(e){return shpsCmm.ajaxMgr.createAjax_ref("POST",e.url,void 0,e.type,e.hdrs,e).then(function(t){return o.setRecord(e.url,t,e.propName).then(function(){return d[e.url]=e.p,l[e.url]=void 0,n(),t.response})})["catch"](function(t){return console.log(t,"retrying"),s(e)})}var r=shpsAjax,i=r.rqsMgr={},o=shpsCmm.iCMgr,a=shpsCmm.util,l={},c={},d={};i.lded=function(n){return n.url=e(n.url),d[n.url]?d[n.url]:n.p=o.chkData(n.url,n.type,n.propName).then(function(e){return d[n.url]=n.p,e},function(){return c[n.url]&&(c[n.url]=void 0),l[n.url]?l[n.url].p:(n.overwrite&&t(),l[n.url]=n,s(n))})}}(),function(){var e=shpsAjax.rscMgr={},t={};e.lded=function(e){return t[e.url]?t[e.url]:(e.type="json",e.propName="rscList",shpsAjax.rqsMgr.lded(e).then(function(n){return shpsCmm.dependenciesLded().then(function(){return t[e.url]=Promise.resolve(n)})}))}}(),function(){var e=shpsAjax.cpnMgr={},t=shpsAjax.cpnList,n=shpsCmm.iCMgr,s=shpsCmm.extFileMgr,r=e.operator={};r.rqsList=[],r.listOpened=[],r.rqsArgs={},r.addRa=function(e,t){var n=this.rqsArgs;t&&(n[e]||(n[e]=[]),-1==n[e].indexOf(t)&&n[e].push(t))},r.open=function(e,n){if(-1==this.rqsList.indexOf(e)&&this.rqsList.push(e),this.addRa(e,n),t[e].lded){var s=this.rqsArgs;if(!s[e]&&-1!=this.listOpened.indexOf(e))return!0;s[e]?(-1==this.listOpened.indexOf(e)&&this.listOpened.push(e),s[e].forEach(function(n){t[e].obj.intro(n)}),delete s[e]):(this.listOpened.push(e),t[e].obj.intro())}},r.beInformedLded=function(e){-1==this.listOpened.indexOf(e)&&-1!=this.rqsList.indexOf(e)&&this.open(e)},r.mdfList=function(){var e=this,n=!1;return this.rqsList.forEach(function(s){t[s].nonCloseCpns&&t[s].nonCloseCpns.forEach(function(t){-1==e.rqsList.indexOf(t)&&(e.rqsList.push(t),n=!0)})}),n?(this.mdfList(),void 0):(this.rqsList.forEach(function(n){t[n].closeCpns&&t[n].closeCpns.forEach(function(t){var n=e.rqsList.indexOf(t);-1!=n&&e.rqsList.splice(n,1)})}),void 0)},r.openOnlyThese=function(e){var n=this;this.rqsList=e.slice(),this.mdfList(),this.listOpened.forEach(function(e){var s=n.rqsList.indexOf(e);console.log(e,s),-1!=s?n.rqsList.splice(s,1):(n.listOpened.splice(n.listOpened.indexOf(e),1),t[e].obj.exit())}),this.rqsList.forEach(function(e){t[e].lded&&n.open(e)})};var i={};i.rqss=[],i.rqd=[],i.nonRqd=[],i.chkAll=function(){if(this.rqd.length>0||this.nonRqd.length>0){if(this.rqd.length>0){if(!this.rqd.every(function(e){return t[e.name].lded?!0:!1}))return!1;this.rqd=[]}e.beInformedLded(),this.nonRqd.length>0&&(this.internalLded(this.nonRqd),this.nonRqd=[])}},i.chkLded=function(e){var n=this;if(!t[e].lded){if(!t[e].obj.lded)return!1;t[e].cpnsUsed&&t[e].cpnsUsed.forEach(function(e){if(!t[e].lded){var s={name:e};n.rqss.every(function(t){return t.name!=e?!0:void 0})&&n.rqss.push(s),n.nonRqd.every(function(t){return t.name!=e?!0:void 0})&&n.nonRqd.push(s)}}),t[e].lded=!0,r.beInformedLded(e)}t[e].forCpns&&t[e].forCpns.forEach(function(e){n.chkLded(e)}),this.chkAll()},i.installItem=function(e,n){var r=this,i=t[n];switch(e.type){case"link":return s.lnked("link",e.objUrl);case"script":return s.lnked("script",e.objUrl,e.async).then(function(){i.obj||shpsAjax.hooks[i.hookName]&&(shpsAjax.hooks[i.hookName](n),i.obj.onload(function(){i.obj.lded=!0}))});case"cpnList":console.log("install cpn list"),i.cpnsNdd=[],i.cpnsUsed=[],i.closeCpns=[],i.nonCloseCpns=[];var o=[];if(e.cpns.forEach(function(e){e.required?(t[e.name].forCpns||(t[e.name].forCpns=[]),t[e.name].forCpns.push(n),i.cpnsNdd.push(e.name),t[e.name].lded||(o.push(e),r.rqss.every(function(t){return t.name!=e.name?!0:void 0})&&r.rqss.push(e))):i.cpnsUsed.push(e.name),e.close?i.closeCpns.push(e.name):i.nonCloseCpns.push(e.name)}),o.length>0)return this.internalLded(o);return;case"html":return shpsCmm.domMgr.domReady().then(function(){var t=document.getElementById(i.cnr_id),n=document.createElement("div");n.innerHTML=e.html,Array.from(n.children).forEach(function(e){t.appendChild(e)})});case"module":return shpsCmm.moduleMgr.get(e.url,!0)}},i.internalLded=function(e){var s=this,r=[];return e.forEach(function(e){var i=e.name;if(!t[i].lded){var o={url:t[i].url};r.push(shpsAjax.rscMgr.lded(o).then(function(e){var r=void 0;if(s.rqss.some(function(e){return e.name==i?(r=t[i],!0):void 0})){if(r.ldP)return r.ldP;r.hookName=e.hook;var o=[];return e.rscs.forEach(function(e){var t=[];e.forEach(function(e){var s=void 0;switch(e.type){case"html":case"cpnList":case"module":s=Promise.resolve(e);break;default:s=n.getData(e.url,"blob","blob").then(function(){return e})}t.push(s)}),o.push(Promise.all(t))}),r.ldP=o.reduce(function(e,t){return e.then(function(){return t}).then(function(e){var t=[];return e.forEach(function(e){var r=void 0;switch(e.type){case"link":case"script":case"img":case"svg":r=n.getObjUrl(e.url,e.type).then(function(t){return e.objUrl=t.objUrl,s.installItem(e,i)});break;default:r=s.installItem(e,i)}t.push(r)}),Promise.all(t)})},Promise.resolve()).then(function(){s.chkLded(i)})}throw new Error("cpn no longer being requested "+i)}))}}),Promise.all(r)},i.ld=function(e){var n=this;this.rqss=e.slice(),this.rqd=[],this.nonRqd=[],e.forEach(function(e){t[e.name].lded||(e.required?n.rqd.push(e):n.nonRqd.push(e))}),console.log("ld non rqd",this.nonRqd),this.rqd.length>0?this.internalLded(this.rqd):this.chkAll()},e.busy=!1,e.rqss=[],e.q=[],e.src=void 0,e.beInformedLded=function(){if(this.busy=!1,"pg"==this.src){var e=[];this.rqss.forEach(function(t){t.close||e.push(t.name)}),r.openOnlyThese(e),shpsAjax.pgMgr.beInformedCpn()}else{if(!this.q[0].every(function(e){return t[e.name].lded?!0:!1}))return!1;this.q.shift()}this.q.length>0&&this.prepare(this.q[0],void 0,!0)},e.prepare=function(e,n,s){var r=this;if("pg"==n)this.src=n,this.rqss=e.slice();else{if(s&&-1==this.q.indexOf(e)&&this.q.push(e),this.busy)return!1;this.src=void 0,e.forEach(function(e){-1==r.rqss.indexOf(e)&&r.rqss.push(e)})}this.busy=!0;var o=[];this.rqss.forEach(function(e){t[e.name].lded||o.push(e)}),o.length>0?i.ld(o):this.beInformedLded()}}(),function(){var e=shpsAjax.psdSidebar={},t=shpsCmm.moduleMgr,n=shpsCmm.extFileMgr,s=shpsCmm.imgLdr,r=shpsCmm.util,i="psd-menu-cnr",o="psd-menu-scrl-cnr",a=!1;e.rszHdlrs=[];var l=[],c=[];e.newBtnPs=[],shpsAjax.inits.push(function(){e.elm=document.getElementById(i),e.scrlCnr=document.getElementById(o)}),e.appendBtn=function(e){var t=this;return this.addBtn?Promise.resolve(this.addBtn(e)):new Promise(function(n,s){t.newBtnPs.push(function(){n(t.addBtn(e))})})},e.noExpand=function(){a||(a=!0,c.forEach(function(e){e()}))},e.doExpand=function(){a&&(a=!1,l.forEach(function(e){e()}))},e.isExpand=function(){return!a},e.addEvtLsnr=function(e,t){switch(e){case"rsz":this.rszHdlrs.push(t);break;case"doExpand":l.push(t);break;case"noExpand":c.push(t)}}}(),function(){function e(e){e.removeAttribute("href"),e.title&&(e.lnkMgr.regdTtl=e.title,e.removeAttribute("title"))}function t(e){var t=e.lnkMgr;e.href||(e.href="#!"+t.regdUrl);var n=t.regdTtl;n&&!e.title&&(e.title=n)}function n(e,t){var n=r[t],s=n.indexOf(e);-1!=s&&n.splice(s,1),n.length<=0&&delete r[t]}var s=shpsAjax.lnkMgr={},r={},i="";s.register=function(t){var s=t.hash.replace("#!","");if(t.lnkMgr){var o=t.lnkMgr.regdUrl;if(o==s)return!0;n(t,o)}else t.lnkMgr={};t.lnkMgr.regdUrl=s,r[s]||(r[s]=[]),r[s].push(t),i==s&&e(t)},s.deregister=function(e){var s=e.lnkMgr;s&&(t(e),n(e,s.regdUrl),e.lnkMgr=void 0)},s.getUrl=function(e){return e.lnkMgr?e.lnkMgr.regdUrl:null},s.beInformed=function(n){r[n]&&r[n].forEach(e),r[i]&&r[i].forEach(t),i=n}}(),function(){function e(){d=h[0].offsetHeight,u.style.lineHeight=d+"px",u.style.fontSize=d+"px",p.classList.contains(o)&&(p.style.perspectiveOrigin="50% "+1.5*d+"px")}function t(e){switch(e){case"end":case"load":case"exit":return!0;default:return!1}}function n(e){return t(e)?(f[e].length>0&&(f[e].forEach(function(e){e()}),f[e]=[]),void 0):!1}function s(){shpsAjax.lded?a.onld():a.ldg()}function r(e){this.removeEventListener(e.type,r),this.classList.remove("shps-logo-loading-end-trans"),this.style.removeProperty("position"),this.style.removeProperty("left")}var i="shps-logo",o="shps-logo-smaller",a=shpsAjax.ldAnim={},l=shpsAjax.lnkMgr,c=shpsCmm.util,d=void 0,u=void 0,h=void 0,p=void 0;shpsAjax.inits.push(function(){u=document.getElementById(i),h=u.getElementsByTagName("span"),p=u.parentElement,l.register(p.getElementsByTagName("a")[0]),e(),shpsCmm.evtMgr.addEvtLsnr(void 0,"optWdwRsz",e)});var m="end",f={end:[],load:[],exit:[]};a.addEvtLsnr=function(e,n){return t(e)?(-1==f[e].indexOf(n)&&f[e].push(n),void 0):!1},a.rmvEvtLsnr=function(e,n){if(!t(e))return!1;var s=f[e].indexOf(n);-1!=s&&f[e].splice(s,1)},a.clrEvtLsnr=function(e){return t(e)?(f[e]=[],void 0):!1},a.setEvtLsnr=function(e,n){return t(e)?(this.clrEvtLsnr(e),this.addEvtLsnr(e,n),void 0):!1},a.onld=function(){m="onload",n("load"),setTimeout(function(){for(var t=function r(e){var t=h[e];new c.AnimFramePromise(function(){t.classList.remove("shps-logo-loading-in-trans","shps-logo-entry-trans"),t.style.left=t.offsetLeft+"px",t.style.position="absolute"}).then(function(){t.classList.add("shps-logo-loading-end-trans"),t.classList.add("shps-logo-3d-"+e),t.style.left="50%"})},s=h.length-1;s>=0;s--)t(s);u.style.removeProperty("animation-duration"),u.classList.add("shps-logo-constant-rotate","shps-logo-rotate"),p.addEventListener("transitionend",function i(t){return t.target!=this?!1:(t.target.removeEventListener(t.type,i),setTimeout(function(){p.style.top="1vmin",p.addEventListener("transitionend",function t(e){e.target.removeEventListener(e.type,t),m="end",n("end")},!1),p.classList.add("shps-logo-smaller"),p.classList.remove("shps-logo-larger"),e(),n("exit")},1e3),void 0)},!1),p.style.top=p.offsetTop-d+"px",p.classList.add("shps-logo-larger")},500)},a.ldg=function(){function e(){setTimeout(function(){n=h.length-1,s()},1e3)}var t=this;m="ldg";var n=void 0,s=function r(){var s=h[n],i=function o(n){if(n.target.removeEventListener(n.type,o),s.classList.remove("shps-logo-entry-trans","shps-logo-loading-out"),s.classList.add("shps-logo-loading-in-init"),s===h[0]){var r=function i(n){n.target.removeEventListener(n.type,i),shpsAjax.lded?t.onld():e()};s.addEventListener("transitionend",r,!1)}setTimeout(function(){s.classList.add("shps-logo-loading-in-trans"),s.classList.remove("shps-logo-loading-in-init")},1e3)};s.addEventListener("transitionend",i,!1),s.classList.remove("shps-logo-loading-in-trans"),s.classList.add("shps-logo-entry-trans","shps-logo-loading-out"),n--,n>=0&&setTimeout(r,100)};e()},a.entry=function(){function e(){h[t].classList.remove("opa-0"),h[t].classList.remove("shps-logo-letter-init-size"),t++,t<h.length&&setTimeout(e,200)}this.entry=function(){if(shpsAjax.lded)return!0;switch(m){case"end":m="entry",p.addEventListener("transitionend",function i(e){return e.target!=this?!1:(e.target.removeEventListener(e.type,i),s(),void 0)}),p.style.removeProperty("top"),p.style.removeProperty("perspective-origin"),p.classList.remove("shps-logo-smaller");for(var e=h.length-1,t=e;t>=0;t--){var n=h[t];n.addEventListener("transitionend",r),n.style.left=25*t+"%",n.classList.remove("shps-logo-3d-"+t)}u.classList.remove("shps-logo-constant-rotate"),u.style.animationDuration="1s";break;case"onload":this.setEvtLsnr("end",this.entry)}},h[h.length-1].addEventListener("transitionend",function n(e){e.target.removeEventListener(e.type,n),s()});var t=0;e()}}(),function(){var e=shpsAjax.pgMgr={},t=shpsCmm.domMgr,n=shpsCmm.moduleMgr,s=shpsAjax.psdSidebar,r=shpsAjax.ldAnim,i=shpsAjax.cpnMgr,o=shpsCmm.iCMgr,a=shpsCmm.extFileMgr,l=void 0,c="/shared/modules/js_frameworks/scrl_snap/",d="psd-ctt-cnr",u="psd-ctt-scrl-cnr",h="psd-bd-cnr",p=e.crtUrl="null",m=e.rqsUrl="null",f=e.rqsHash=null,g=e.cache={"null":{lded:!0,obj:{intro:function x(){}}}},v=e.operator={},_=[];shpsAjax.inits.push(function(){var t=v.scrlCnr=document.getElementById(u),s=v.cttCnr=document.getElementById(d);n.get(c,!0).then(function(e){l=e.obj.scrlSnapIdx,l.add(t,function(){return{v:s.children.length}},function(e){var n=e.v,r=s.children[n];!r||r==t.lastElm&&t.lastIdx==n||(n!=t.lastIdx&&(_.forEach(function(e){e(n-t.lastIdx)}),t.lastIdx=n),t.lastElm=r,v.move3d(r))})}),e.psdBd=document.getElementById(h)}),v.getPgIdx=function(e){return Array.prototype.indexOf.call(this.cttCnr.children,e)},v.getElms_bfr=function(e){var t=this.getPgIdx(e);return t>0?Array.prototype.slice.call(this.cttCnr.children,0,t):!1},v.getElms_afr=function(e){var t=this.getPgIdx(e),n=this.cttCnr.children;return t<n.length-1?Array.prototype.slice.call(n,t+1):!1},v.GLOBAL_3D_OS=120,v.SINGLE_3D_OS=20,v.SDW_3D_SZE=12,v.SDW_OS=14,v.BLUR_BFR=10,v.BLUR_AFT=v.BLUR_BFR/2;var b=[];v.move3d_bfr=function(e){var n=this,s=this.getElms_bfr(e);if(s!==!1){var r=s.length-1,i=t.getRemPx()*this.SDW_3D_SZE,o=i/e.offsetHeight*100+100+this.SDW_OS,a=(o-this.GLOBAL_3D_OS/2)/o*90;s.forEach(function(e){e.style.transformOrigin="top",e.style.transform="translatey(-"+(n.GLOBAL_3D_OS+n.SINGLE_3D_OS*r)+"%) rotatex(90deg) translatey(-"+n.GLOBAL_3D_OS+"%) rotatex(-90deg) rotatex(-"+a+"deg)",e.style.filter="blur("+n.BLUR_BFR+"px)",r>0?e.classList.add("opa-0"):e.classList.remove("opa-0"),r--,b.forEach(function(t){t(e)})})}};var E=[];v.move3d_afr=function(e){var n=this,s=this.getElms_afr(e);if(s!==!1){var r=0,i=t.getRemPx()*this.SDW_3D_SZE,o=i/e.offsetHeight*100+100+this.SDW_OS,a=(o-this.GLOBAL_3D_OS/2)/o*90;s.forEach(function(e){e.style.transformOrigin="bottom",e.style.transform="translatey("+(n.GLOBAL_3D_OS+n.SINGLE_3D_OS*r)+"%) rotatex(90deg) translatey(-"+n.GLOBAL_3D_OS+"%) rotatex(-90deg) rotatex("+a+"deg)",e.style.filter="blur("+n.BLUR_AFT+"px)",r>0?e.classList.add("opa-0"):e.classList.remove("opa-0"),r++,E.forEach(function(t){t(e)})})}};var y=[];v.rmv3d=function(e){e.style.removeProperty("transform"),e.style.removeProperty("filter"),e.classList.remove("opa-0"),y.forEach(function(t){t(e)})},v.move3d=function(e){this.rmv3d(e),this.move3d_bfr(e),this.move3d_afr(e)};var C=[],L=[];v.closeHv=function(){this.scrlCnr.classList.remove("psd-vp-cnr-scrl"),C.forEach(function(e){e()})},v.swapPageIntro=function(e,t){var n={};g[e].obj.hashChange&&(g[e].elm.hash=t,n.cb=function(){g[e].obj.hashChange(t)},n.cbTiming="end"),g[e].obj.introed?n.cb&&n.cb():(g[e].obj.intro(n),g[e].obj.introed=!0),g[e].settings&&g[e].settings.psdMenuNoExp?s.noExpand():s.doExpand()},v.swap=function(t){var n=this,s=p,r=p=e.crtUrl=t,i=g[t].elm,o=this.getElms_afr(i);if(o!==!1&&o.forEach(function(e){n.cttCnr.insertBefore(e,i)}),r!=s){var a=this.scrlCnr;a.classList.add("psd-vp-cnr-scrl");var c=function d(){l.rmv(a,d),g[s].obj.swapOut&&g[s].obj.swapOut(),n.closeHv()};l.add(a,function(){return{v:1}},c),a.scrollTop+a.clientHeight<a.scrollHeight-1?a.scrollTop=a.scrollHeight-a.clientHeight:l.forceFireHdlrs(a),g[r].obj.swapIn&&g[r].obj.swapIn()}"null"==s?this.swapPageIntro(t,f):setTimeout(function(){n.swapPageIntro(t,f)},1e3)},e._chkLded=function(){function e(){v.swap(m)}if(!g[m].lded){if(!g[m].obj||!g[m].obj.lded)return!1;if(g[m].cpnsNdd&&!g[m].nddLded)return!1;g[m].lded=!0}shpsAjax.lded?e():(r.setEvtLsnr("exit",e),shpsAjax.lded=!0)},e.beInformedCpn=function(){if(g[m].cpnsNdd){if(g[m].cpnsNdd.some(function(e){return shpsAjax.cpnList[e].lded?void 0:!0}))return!1;g[m].nddLded=!0}this._chkLded()},e._installItem=function(e,t){var n=g[t];switch(e.type){case"link":return a.lnked("link",e.objUrl);case"cpnList":if(n.cpns=e.cpns,n.cpnsNdd=[],n.cpnsUsed=[],e.cpns.forEach(function(e){e.required?n.cpnsNdd.push(e.name):n.cpnsUsed.push(e.name)}),t!=m)return;return i.prepare(n.cpns,"pg"),void 0;case"html":var s=document.createElement("section");s.classList.add("shps-ajax-vp","pos-abs-ful"),s.innerHTML=e.html,n.elm=s,n.elm.hash=f,s.ttl=n.ttl,s.url=t,L.forEach(function(e){e(s)});var r=v.cttCnr.children;v.cttCnr.insertBefore(s,r[r.length-1]);var o=document.createElement("div");return o.classList.add("psd-vp-pg-ph"),v.scrlCnr.appendChild(o),void 0;case"script":return a.lnked("script",e.objUrl,e.async).then(function(){n.obj||shpsAjax.hooks[n.hookName]&&(shpsAjax.hooks[n.hookName](t),n.obj.onload(function(){n.obj.lded=!0}))});case"module":return shpsCmm.moduleMgr.get(e.url,!0)}},e.open=function(t,n){var s=this;return f=this.rqsHash=n,t==m?!0:(m=this.rqsUrl=t,g[t]&&g[t].lded?(g[t].cpnsNdd&&g[t].cpnsNdd.some(function(e){var t=i.operator.listOpened.indexOf(e);return-1==t?!0:void 0})&&(g[t].obj.exit({instant:!0}),g[t].obj.introed=!1),i.prepare(g[t].cpns,"pg"),void 0):(shpsAjax.lded=!1,r.entry(),g[t]?g[t].cpnsNdd&&!g[t].nddLded?(i.prepare(g[t].cpns,"pg"),void 0):(this._chkLded(),!1):(shpsAjax.rscMgr.lded({url:t,overwrite:!0}).then(function(n){if(t!=m)throw new Error("pg no longer rqsted "+t);if(g[t])return!1;var r=g[t]={};r.hookName=n.hook,r.ttl=n.ttl,n.settings&&(r.settings=n.settings),r.cpns=[];var a=[];n.rscs.forEach(function(e){var t=[];e.forEach(function(e){var n=void 0;switch(e.type){case"html":case"cpnList":case"module":n=Promise.resolve(e);break;default:n=o.getData(e.url,"blob","blob").then(function(){return e})}t.push(n)});var n=Promise.all(t);a.push(n)}),a.reduce(function(e,n){return e.then(function(){return n}).then(function(e){var n=[];return e.forEach(function(e){var r=void 0;switch(e.type){case"link":case"script":case"img":case"svg":r=o.getObjUrl(e.url,e.type).then(function(n){return e.objUrl=n.objUrl,s._installItem(e,t)});break;default:r=s._installItem(e,t)}n.push(r)}),Promise.all(n)})},Promise.resolve()).then(function(){if(r.cpns.length<=0){if(t!=m)throw new Error("pg no longer rqsted aft install "+t);i.prepare(r.cpns,"pg")}else e._chkLded()})}),!1)))},e.addEvtLsnr=function(e,t){var n=void 0;switch(e){case"hvScrl":n=_;break;case"hv3d_bfr":n=b;break;case"hv3d_afr":n=E;break;case"hv3d_rmv":n=y;break;case"hvClose":n=C;break;case"hvElm3dInit":n=L;break;default:return!1}-1==n.indexOf(t)&&n.push(t)}}(),function(){var e="psd-msg-cnr",t="toast-cnr",n="msg-cnr",s=shpsAjax.msgMgr={},r=shpsCmm.domMgr,i=shpsCmm.util;shpsAjax.inits.push(function(){var o=document.getElementById(e),a=o.getElementsByClassName("top")[0],l=o.getElementsByClassName("btm")[0],c=a.getElementsByClassName(t)[0],d=l.getElementsByClassName(t)[0],u=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._setElm=n._setElm.bind(n),n}return _inherits(t,e),_createClass(t,[{key:"_setElm",value:function n(e){this._elm=e}}],[{key:"defaultProps",get:function s(){return{clss:""}}}]),_createClass(t,[{key:"getElm",value:function r(){return this._elm}},{key:"render",value:function i(){return React.createElement("button",{type:"button",className:"no-style clickable hvr-bg-bfr pos-rel "+this.props.clss,onClick:this.props.onClk,ref:this._setElm},this.props.children)}}]),t}(React.Component),h=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._setElm=n._setElm.bind(n),n}return _inherits(t,e),_createClass(t,[{key:"_setElm",value:function n(e){this._elm=e}}],[{key:"defaultProps",get:function s(){return{clss:""}}}]),_createClass(t,[{key:"getElm",value:function o(){return this._elm}},{key:"intro",value:function a(){var e=r.getElmCloneDimension(this._elm),t=this;this._elm.addEventListener("transitionend",function n(e){return e.target!=this?!1:(this.removeEventListener(e.type,n),t._elm.style.height="auto",void 0)}),this._elm.style.height=e.h+"px"}},{key:"outro",value:function l(){var e=this,t=r.getElmCloneDimension(this._elm),n=new Promise(function(t,n){e._elm.addEventListener("transitionend",function s(e){return e.target!=this?!1:(this.removeEventListener(e.type,s),t(),void 0)})});return new i.AnimFramePromise(function(){e._elm.style.height=t.h+"px"}).then(function(){e._elm.style.removeProperty("height")}),n}},{key:"rmv",value:function c(){var e=this;return this.outro().then(function(){e._elm.parentNode.removeChild(e._elm)})}},{key:"render",value:function d(){return React.createElement("li",{className:"of-vsb "+this.props.clss,ref:this._setElm},this.props.children)}}]),t}(React.Component),p=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._setElm=n._setElm.bind(n),n._setCnrObj=n._setCnrObj.bind(n),n._btns=[],n.props.btns&&(n._btns=n.props.btns.map(function(e){return React.createElement(u,{onClk:e.onClk},e.txt)})),n}return _inherits(t,e),_createClass(t,[{key:"_setElm",value:function n(e){this._elm=e}},{key:"_setCnrObj",value:function s(e){this._cnrObj=e,this._cnrElm=e.getElm()}}],[{key:"defaultProps",get:function r(){return{clss:""}}}]),_createClass(t,[{key:"getElm",value:function i(){return this._cnrElm}},{key:"play",value:function o(){this._cnrObj.intro();var e=this;this._elm.addEventListener("animationend",function t(n){return n.target!=this?!1:(this.removeEventListener(n.type,t),e._cnrObj.rmv(),void 0)}),this._elm.classList.add("play")}},{key:"render",value:function a(){return React.createElement(h,{ref:this._setCnrObj},React.createElement("div",{className:this.props.clss,ref:this._setElm},this.props.msg,this._btns))}}]),t}(React.Component);s.toast=function(e,t){function n(e){r=e}var s=d;t&&(s=c);var r=void 0;ReactDOM.render(React.createElement(p,_extends({},e,{ref:n})),document.createDocumentFragment()),s.appendChild(r.getElm()),r.play()};var m=a.getElementsByClassName(n)[0],f=l.getElementsByClassName(n)[0],g=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));switch(n._setElm=n._setElm.bind(n),n._setCnrObj=n._setCnrObj.bind(n),n.dismiss=n.dismiss.bind(n),n.props.type){case"notice":n._typeCls="notice";break;case"warning":n._typeCls="warning";break;case"error":n._typeCls="err";break;default:n._typeCls=""}return n}return _inherits(t,e),_createClass(t,[{key:"_setElm",value:function n(e){this._elm=e}},{key:"_setCnrObj",value:function s(e){this._cnrObj=e,this._cnrElm=e.getElm()}}]),_createClass(t,[{key:"getElm",value:function r(){return this._cnrElm}},{key:"intro",value:function i(){this._cnrObj.intro(),this._elm.classList.add("intro")}},{key:"dismiss",value:function o(){this._elm.classList.remove("intro"),this._cnrObj.rmv(),this.props.onDismiss&&this.props.onDismiss()}},{key:"render",value:function a(){return React.createElement(h,{ref:this._setCnrObj},React.createElement("div",{className:"dsp-if "+this._typeCls,ref:this._setElm},React.createElement("p",{className:"dsp-ib ta-lft"},this.props.msg),React.createElement(u,{onClk:this.dismiss},"Shut up.")))}}]),t}(React.Component);s.createMsg=function(e,t){function n(e){r=e}var s=f;t&&(s=m);var r=void 0;ReactDOM.render(React.createElement(g,_extends({},e,{ref:n})),document.createDocumentFragment()),s.appendChild(r.getElm()),r.intro()}})}(),function(){var e=shpsAjax.pgMgr,t=/^#!([^#]+.*)/,n=/^([^#]+)(#.*)/;shpsAjax.hashChange=function(){var s=window.location.hash,r=t.exec(s);if(null!==r)if(r=r[1],shpsAjax.lnkMgr.beInformed(r),s=n.exec(r),null!==s&&(r=s[1],s=s[2]),r!=e.crtUrl||r!=e.rqsUrl)e.open(r,s);else{e.operator.closeHv();var i=e.cache[r];i.obj.hashChange&&i.obj.hashChange(s),i.elm.hash=s}}}(),shpsCmm.domMgr.domReady().then(function(){var e="/shared/jss/gtm.js",t="/shared/modules/ldg_signs/td_bars/",n=shpsAjax.cpnMgr,s=shpsCmm.iCMgr,r=shpsCmm.extFileMgr,i=shpsCmm.imgLdr,o=shpsCmm.moduleMgr,a=shpsAjax.msgMgr;shpsCmm.dependenciesLded().then(function(){function e(e){i=e}var s=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._setElm=n._setElm.bind(n),n}return _inherits(t,e),_createClass(t,[{key:"_setElm",value:function n(e){this._elm=e}}]),_createClass(t,[{key:"getElm",value:function s(){return this._elm}},{key:"render",value:function r(){return React.createElement("div",{id:"shps-logo-cnr",ref:this._setElm},React.createElement("h1",{id:"shps-logo"},React.createElement("a",{href:"#!homepage/",title:"Go to the homepage."},React.createElement("span",{className:"opa-0 shps-logo-letter-init-size shps-logo-entry-trans"},React.createElement("div",null,"S")),React.createElement("span",{className:"opa-0 shps-logo-letter-init-size shps-logo-entry-trans"},React.createElement("div",null,"H")),React.createElement("span",{className:"opa-0 shps-logo-letter-init-size shps-logo-entry-trans"},React.createElement("div",null,"P")),React.createElement("span",{className:"opa-0 shps-logo-letter-init-size shps-logo-entry-trans"},React.createElement("div",null,"S")))))}}]),t}(React.Component),r=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._setElm=n._setElm.bind(n),n}return _inherits(t,e),_createClass(t,[{key:"_setElm",value:function n(e){this._elm=e}}]),_createClass(t,[{key:"getElm",value:function s(){return this._elm}},{key:"render",value:function r(){return React.createElement("div",{id:"psd-bd-cnr",className:"pos-abs-ful of-hid dsp-flx",ref:this._setElm},React.createElement("aside",{id:"psd-menu-cnr",className:"pos-rel"},React.createElement("div",{className:"scrl-cnr-wpr dsp-if flx-dir-col h-100 disabled"},React.createElement("ul",{id:"psd-menu-scrl-cnr",className:"pos-rel dsp-ib no-style no-indent mrg-0"})),React.createElement("div",{className:"sdw disabled pos-abs-ful of-hid"})),React.createElement("section",{id:"psd-vp-cnr",className:"psd-vp-cnr"},React.createElement("div",{id:"psd-bg-cnr",className:"pos-abs-ful"}),React.createElement("div",{id:"psd-ctt-scrl-cnr",className:"psd-ctt-scrl-cnr pos-abs-ful"},React.createElement("div",null)),React.createElement("main",{id:"psd-ctt-cnr",className:"pos-abs-ful",role:"main"})),React.createElement("aside",null),React.createElement("section",{id:"psd-msg-cnr",className:"dsp-flx flx-dir-col pos-abs-ful disabled"},React.createElement("div",{className:"top"},React.createElement("ul",{className:"msg-cnr no-style no-indent"}),React.createElement("ul",{className:"toast-cnr no-style no-indent"})),React.createElement("div",{className:"btm"},React.createElement("ul",{className:"toast-cnr no-style no-indent"}),React.createElement("ul",{className:"msg-cnr no-style no-indent"}))))}}]),t}(React.Component);shpsInstaller.stopAnim(),ReactDOM.render(React.createElement(r,null),document.body);var i=void 0;ReactDOM.render(React.createElement(s,{ref:e}),document.createDocumentFragment()),document.body.appendChild(i.getElm()),shpsAjax.inits.forEach(function(e){e()}),window.location.hash.indexOf("#!")>=0?shpsAjax.hashChange():shpsAjax.pgMgr.open("homepage/"),window.addEventListener("hashchange",shpsAjax.hashChange,!1);var l=[{name:"psdSidebarActivator"},{name:"historyView"},{name:"betaSign"}];n.prepare(l,void 0,!0),o.get(t,!0),a.toast({msg:"Test Toast"}),setTimeout(function(){a.toast({msg:"Toast with button test.",btns:[{txt:"Undo",onClk:function e(){console.log("toast undo")}},{txt:"Redo",onClk:function t(){console.log("toast redo")}}]})},750),a.toast({msg:"top toast test! Hover over to stop me from disappearing!"},!0);var c=localStorage.getItem("cookieMsgDismissed");c||a.createMsg({msg:React.createElement("small",null,"Our site uses cookies. Cookies are tasty, and they help you stay healthy. One cookie a day keeps doctors away, so that no one can help you when you get sick."),onDismiss:function d(){localStorage.setItem("cookieMsgDismissed","true")}}),setTimeout(function(){a.createMsg({msg:"Testing testing attention please.",type:"error"})},1e3)}),r.lnked_bu("script",e)});